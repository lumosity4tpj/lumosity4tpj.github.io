<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.5.0',
    exturl: true,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"flat"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="动态规划线性dp">
<meta name="keywords" content="求职">
<meta property="og:type" content="article">
<meta property="og:title" content="动态规划">
<meta property="og:url" content="https:&#x2F;&#x2F;lumosity4tpj.github.io&#x2F;2020&#x2F;09&#x2F;08&#x2F;%E6%B1%82%E8%81%8C-%E7%BC%96%E7%A8%8B-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92&#x2F;index.html">
<meta property="og:site_name" content="拥">
<meta property="og:description" content="动态规划线性dp">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-09-08T12:16:11.727Z">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://lumosity4tpj.github.io/2020/09/08/%E6%B1%82%E8%81%8C-%E7%BC%96%E7%A8%8B-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><style>
#needsharebutton-postbottom {
  cursor: pointer;
  height: 26px;
  margin-top: 10px;
  position: relative;
}
#needsharebutton-postbottom .btn {
  border: 1px solid $btn-default-border-color;
  border-radius: 3px;
  display: initial;
  padding: 1px 4px;
}
</style>
  <title>动态规划 | 拥</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?c4ba07c82d0814584b2781aabe2701b3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">拥</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">2</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">1</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">9</span></a>

  </li>
        <li class="menu-item menu-item-photo">

    <a href="/photo/" rel="section"><i class="fa fa-fw fa-image"></i>相册</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lumosity4tpj.github.io/2020/09/08/%E6%B1%82%E8%81%8C-%E7%BC%96%E7%A8%8B-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="lumosity">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="拥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          动态规划
        </h2>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-09-08 20:04:29 / 修改时间：20:16:11" itemprop="dateCreated datePublished" datetime="2020-09-08T20:04:29+08:00">2020-09-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>29k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><h3 id="线性dp"><a href="#线性dp" class="headerlink" title="线性dp"></a>线性dp</h3><a id="more"></a>

<h4 id="序列问题"><a href="#序列问题" class="headerlink" title="序列问题"></a>序列问题</h4><h5 id="300-最长上升子序列"><a href="#300-最长上升子序列" class="headerlink" title="*300. 最长上升子序列"></a>*<span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvbG9uZ2VzdC1pbmNyZWFzaW5nLXN1YnNlcXVlbmNlLw==" title="https://leetcode-cn.com/problems/longest-increasing-subsequence/">300. 最长上升子序列<i class="fa fa-external-link"></i></span></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># dp[i]表示a[i]为结尾的最长上升子序列的长度</span><br><span class="line">dp[i] = max(dp[j]+1,dp[i]),if a[j]&lt;a[i],0&lt;=j&lt;i</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lengthOfLIS</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># if not nums: return 0</span></span><br><span class="line">        <span class="comment"># dp = [1 for _ in range(len(nums))] # 表示以i结尾的最长上升子序列的长度</span></span><br><span class="line">        <span class="comment"># for i in range(len(nums)):</span></span><br><span class="line">        <span class="comment">#     for j in range(i):</span></span><br><span class="line">        <span class="comment">#         if nums[j]&lt;nums[i]:</span></span><br><span class="line">        <span class="comment">#             dp[i] = max(dp[i],dp[j]+1)</span></span><br><span class="line">        <span class="comment"># return max(dp)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 要使上升子序列尽可能的长，则需要让序列上升得尽可能慢</span></span><br><span class="line">        <span class="comment"># 因此希望每次在上升子序列最后加上的那个数尽可能的小</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        res = [nums[<span class="number">0</span>]] <span class="comment"># res[i]保存的是长度为i+1的上升子序列的最小尾部值，(所以长度是不变或增加的)</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(nums)):</span><br><span class="line">            <span class="comment"># 希望上升子序列长</span></span><br><span class="line">            <span class="keyword">if</span> nums[i]&gt;res[<span class="number">-1</span>]:</span><br><span class="line">                res.append(nums[i])</span><br><span class="line">            <span class="comment"># 否则需要查找可以被替换为更小的值</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                l,r = <span class="number">0</span>,len(res)<span class="number">-1</span></span><br><span class="line">                <span class="keyword">while</span> l&lt;r:</span><br><span class="line">                    mid = (l+r)&gt;&gt;<span class="number">1</span></span><br><span class="line">                    <span class="keyword">if</span> res[mid]&lt;nums[i]:</span><br><span class="line">                        l = mid + <span class="number">1</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        r = mid</span><br><span class="line">                <span class="comment"># 替换</span></span><br><span class="line">                res[l] = nums[i]</span><br><span class="line">        <span class="keyword">return</span> len(res)</span><br></pre></td></tr></table></figure>

<h5 id="1143-最长公共子序列"><a href="#1143-最长公共子序列" class="headerlink" title="1143. 最长公共子序列"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvbG9uZ2VzdC1jb21tb24tc3Vic2VxdWVuY2Uv" title="https://leetcode-cn.com/problems/longest-common-subsequence/">1143. 最长公共子序列<i class="fa fa-external-link"></i></span></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># dp[i][j]表示前缀子串a[1~i]与b[1~j]的最长公共子序列的长度</span><br><span class="line">dp[i][j] = 0 if i==0 or j==0</span><br><span class="line">if a[i]==b[j]:</span><br><span class="line">    dp[i][j] = dp[i-1][j-1] + 1</span><br><span class="line">else:</span><br><span class="line">    dp[i][j] = max(dp[i-1][j],dp[i][j-1])</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestCommonSubsequence</span><span class="params">(self, text1: str, text2: str)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># # 二维dp</span></span><br><span class="line">        <span class="comment"># m,n = len(text1),len(text2)</span></span><br><span class="line">        <span class="comment"># dp = [[0]*(n+1) for _ in range(m+1)] # i=0 or j=0 则为0</span></span><br><span class="line">        <span class="comment"># for i in range(1,m+1):</span></span><br><span class="line">        <span class="comment">#     for j in range(1,n+1):</span></span><br><span class="line">        <span class="comment">#         if text1[i-1]==text2[j-1]:</span></span><br><span class="line">        <span class="comment">#             dp[i][j] = dp[i-1][j-1] + 1</span></span><br><span class="line">        <span class="comment">#         else:</span></span><br><span class="line">        <span class="comment">#             dp[i][j] = max(dp[i-1][j],dp[i][j-1])</span></span><br><span class="line">        <span class="comment"># return dp[-1][-1]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 空间压缩</span></span><br><span class="line">        m,n = len(text1),len(text2)</span><br><span class="line">        dp = [<span class="number">0</span>]*(n+<span class="number">1</span>)</span><br><span class="line">        one,two = <span class="number">0</span>,<span class="number">0</span> <span class="comment"># 分别表示i-1层的j-1和j</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,m+<span class="number">1</span>):</span><br><span class="line">            one,two = <span class="number">0</span>,dp[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> text1[i<span class="number">-1</span>]==text2[j<span class="number">-1</span>]:</span><br><span class="line">                    dp[j] = one + <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[j] = max(two,dp[j<span class="number">-1</span>])</span><br><span class="line">                <span class="keyword">if</span> j&lt;n:</span><br><span class="line">                    one,two = two,dp[j+<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h5 id="最长公共上升子序列"><a href="#最长公共上升子序列" class="headerlink" title="最长公共上升子序列"></a>最长公共上升子序列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># dp[i][j]表示a[1~j]和b[1~j]可以构成的以b[j]为结尾的长度</span><br><span class="line">if a[i]==b[j]:</span><br><span class="line">    dp[i][j] = max(dp[i][j],dp[i-1][k]+1),if b[k]&lt;b[j],0&lt;=k&lt;j</span><br><span class="line">else:</span><br><span class="line">    dp[i][j] = dp[i-1][j]</span><br></pre></td></tr></table></figure>

<h4 id="编辑距离问题"><a href="#编辑距离问题" class="headerlink" title="编辑距离问题"></a>编辑距离问题</h4><h5 id="72-编辑距离"><a href="#72-编辑距离" class="headerlink" title="72. 编辑距离"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvZWRpdC1kaXN0YW5jZS8=" title="https://leetcode-cn.com/problems/edit-distance/">72. 编辑距离<i class="fa fa-external-link"></i></span></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># dp[i][j]为word1[0...i]和word2[0...j]匹配的最小编辑距离</span><br><span class="line">if a[i]==b[j]:</span><br><span class="line">    dp[i][j] = dp[i-1][j-1]</span><br><span class="line">else:</span><br><span class="line">    dp[i][j] = min(dp[i-1][j-1],dp[i-1][j],dp[i][j-1]) + 1</span><br><span class="line"># dp[i-1][j] 删除</span><br><span class="line"># dp[i][j-1] 插入</span><br><span class="line"># dp[i][j-1] 替换/跳过</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minDistance</span><span class="params">(self, word1: str, word2: str)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># # 递归</span></span><br><span class="line">        <span class="comment"># if len(word1)*len(word2)==0:</span></span><br><span class="line">        <span class="comment">#     return len(word1)+len(word2)</span></span><br><span class="line">        <span class="comment"># from functools import lru_cache</span></span><br><span class="line">        <span class="comment"># @lru_cache(None)</span></span><br><span class="line">        <span class="comment"># def helper(i,j):</span></span><br><span class="line">        <span class="comment">#     if i==-1:</span></span><br><span class="line">        <span class="comment">#         return j+1</span></span><br><span class="line">        <span class="comment">#     if j==-1:</span></span><br><span class="line">        <span class="comment">#         return i+1</span></span><br><span class="line">        <span class="comment">#     if word1[i]==word2[j]:</span></span><br><span class="line">        <span class="comment">#         return helper(i-1,j-1)</span></span><br><span class="line">        <span class="comment">#     else:</span></span><br><span class="line">        <span class="comment">#         return min(</span></span><br><span class="line">        <span class="comment">#             helper(i,j-1)+1,helper(i-1,j)+1,helper(i-1,j-1)+1</span></span><br><span class="line">        <span class="comment">#         )</span></span><br><span class="line">        <span class="comment"># return helper(len(word1)-1,len(word2)-1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 动规</span></span><br><span class="line">        m,n = len(word1),len(word2)</span><br><span class="line">        <span class="keyword">if</span> m*n==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> m+n</span><br><span class="line">        dp = [[<span class="number">0</span>]*(n+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(m+<span class="number">1</span>)]</span><br><span class="line">        <span class="comment"># 对于某一word为0时，距离则为另一word的长度</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m+<span class="number">1</span>):</span><br><span class="line">            dp[i][<span class="number">0</span>] = i</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(n+<span class="number">1</span>):</span><br><span class="line">            dp[<span class="number">0</span>][j] = j</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,m+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">                <span class="comment"># 相同时状态不变</span></span><br><span class="line">                <span class="keyword">if</span> word1[i<span class="number">-1</span>]==word2[j<span class="number">-1</span>]:</span><br><span class="line">                    dp[i][j] = dp[i<span class="number">-1</span>][j<span class="number">-1</span>]</span><br><span class="line">                <span class="comment"># 否则取三种操作中最小的</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[i][j] = min(dp[i<span class="number">-1</span>][j],dp[i][j<span class="number">-1</span>],dp[i<span class="number">-1</span>][j<span class="number">-1</span>]) + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h5 id="面试题-01-05-一次编辑"><a href="#面试题-01-05-一次编辑" class="headerlink" title="面试题 01.05. 一次编辑"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvb25lLWF3YXktbGNjaS8=" title="https://leetcode-cn.com/problems/one-away-lcci/">面试题 01.05. 一次编辑<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">oneEditAway</span><span class="params">(self, first: str, second: str)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">if</span> abs(len(first)-len(second))&gt;<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        i,j = <span class="number">0</span>,<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i&lt;len(first) <span class="keyword">and</span> j&lt;len(second):</span><br><span class="line">            <span class="keyword">if</span> first[i]==second[j]:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">                j += <span class="number">1</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">return</span> first[i+<span class="number">1</span>:]==second[j:] <span class="keyword">or</span> first[i:]==second[j+<span class="number">1</span>:] <span class="keyword">or</span> first[i+<span class="number">1</span>:]==second[j+<span class="number">1</span>:]</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h4 id="最大和问题"><a href="#最大和问题" class="headerlink" title="最大和问题"></a>最大和问题</h4><h5 id="53-最大子序和"><a href="#53-最大子序和" class="headerlink" title="53. 最大子序和"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvbWF4aW11bS1zdWJhcnJheS8=" title="https://leetcode-cn.com/problems/maximum-subarray/">53. 最大子序和<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxSubArray</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># 暴力</span></span><br><span class="line">        cur = nums[<span class="number">0</span>]</span><br><span class="line">        res = nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(nums)):</span><br><span class="line">            <span class="keyword">if</span> cur&lt;<span class="number">0</span>:</span><br><span class="line">                cur = nums[i]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cur += nums[i]</span><br><span class="line">            res = max(res,cur)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># # 动规</span></span><br><span class="line">        <span class="comment"># # dp[i] = max(dp[i-1]+a[i],a[i])</span></span><br><span class="line">        <span class="comment"># res = float('-inf')</span></span><br><span class="line">        <span class="comment"># cur = 0</span></span><br><span class="line">        <span class="comment"># for i in nums:</span></span><br><span class="line">        <span class="comment">#     # 选或者不选</span></span><br><span class="line">        <span class="comment">#     cur = max(cur+i,i)</span></span><br><span class="line">        <span class="comment">#     res = max(res,cur)</span></span><br><span class="line">        <span class="comment"># return res</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># # 分治</span></span><br><span class="line">        <span class="comment"># def Merge(nums,l,r):</span></span><br><span class="line">        <span class="comment">#     if l==r:</span></span><br><span class="line">        <span class="comment">#         return nums[l]</span></span><br><span class="line">        <span class="comment">#     mid = (l+r)&gt;&gt;1</span></span><br><span class="line">        <span class="comment">#     left = Merge(nums,l,mid)</span></span><br><span class="line">        <span class="comment">#     right = Merge(nums,mid+1,r)</span></span><br><span class="line">        <span class="comment">#     cross = merge(nums,l,mid,r)</span></span><br><span class="line">        <span class="comment">#     return max(left,cross,right)</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># def merge(nums,l,mid,r):</span></span><br><span class="line">        <span class="comment">#     cursum = 0</span></span><br><span class="line">        <span class="comment">#     left = float('-inf')</span></span><br><span class="line">        <span class="comment">#     for i in range(mid,l-1,-1):</span></span><br><span class="line">        <span class="comment">#         cursum += nums[i]</span></span><br><span class="line">        <span class="comment">#         left = max(left,cursum)</span></span><br><span class="line">        <span class="comment">#     cursum = 0</span></span><br><span class="line">        <span class="comment">#     right = float('-inf')</span></span><br><span class="line">        <span class="comment">#     for i in range(mid+1,r+1):</span></span><br><span class="line">        <span class="comment">#         cursum += nums[i]</span></span><br><span class="line">        <span class="comment">#         right = max(right,cursum)</span></span><br><span class="line">        <span class="comment">#     return left+right</span></span><br><span class="line">        <span class="comment"># return Merge(nums,0,len(nums)-1)</span></span><br></pre></td></tr></table></figure>

<h5 id="120-三角形最小路径和"><a href="#120-三角形最小路径和" class="headerlink" title="120. 三角形最小路径和"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvdHJpYW5nbGUv" title="https://leetcode-cn.com/problems/triangle/">120. 三角形最小路径和<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minimumTotal</span><span class="params">(self, triangle: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># dp[i][j] = min(dp[i-1][j],dp[i-1][j-1]) + a[i][j]</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> triangle <span class="keyword">or</span> len(triangle[<span class="number">0</span>])==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        m,n = len(triangle),len(triangle[<span class="number">-1</span>])</span><br><span class="line">        dp = [[float(<span class="string">'inf'</span>)]*n <span class="keyword">for</span> _ <span class="keyword">in</span> range(m)]</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = triangle[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> j==<span class="number">0</span>:</span><br><span class="line">                    dp[i][j] = dp[i<span class="number">-1</span>][j] + triangle[i][j]</span><br><span class="line">                <span class="keyword">elif</span> j==i:</span><br><span class="line">                    dp[i][j] = dp[i<span class="number">-1</span>][j<span class="number">-1</span>] + triangle[i][j]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[i][j] = min(dp[i<span class="number">-1</span>][j],dp[i<span class="number">-1</span>][j<span class="number">-1</span>]) + triangle[i][j]</span><br><span class="line">        <span class="keyword">return</span> min(dp[<span class="number">-1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># # dp[i][j] = min(dp[i-1][j],dp[i-1][j-1]) + a[i][j]</span></span><br><span class="line">        <span class="comment"># if not triangle or len(triangle[0])==0:</span></span><br><span class="line">        <span class="comment">#     return 0</span></span><br><span class="line">        <span class="comment"># m,n = len(triangle),len(triangle[-1])</span></span><br><span class="line">        <span class="comment"># dp = [float('inf') for _ in range(n)]</span></span><br><span class="line">        <span class="comment"># dp[0] = triangle[0][0]</span></span><br><span class="line">        <span class="comment"># for i in range(1,m):</span></span><br><span class="line">        <span class="comment">#     pre,cur = dp[0],dp[1]</span></span><br><span class="line">        <span class="comment">#     for j in range(i+1):</span></span><br><span class="line">        <span class="comment">#         if j==0 or j==i:</span></span><br><span class="line">        <span class="comment">#             dp[j] = pre + triangle[i][j]</span></span><br><span class="line">        <span class="comment">#         else:</span></span><br><span class="line">        <span class="comment">#             dp[j] = min(pre,cur) + triangle[i][j]</span></span><br><span class="line">        <span class="comment">#             if j&gt;=1:</span></span><br><span class="line">        <span class="comment">#                 pre,cur = cur,dp[j+1]</span></span><br><span class="line">        <span class="comment"># return min(dp)</span></span><br></pre></td></tr></table></figure>

<h3 id="区间dp"><a href="#区间dp" class="headerlink" title="区间dp"></a>区间dp</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">dp[i][j]一般表示区间[i,j)之间的某个属性，它是分阶段划分问题，与阶段中元素出现的顺序和由前一阶段的哪些元素合并而来有很大的关系(例：dp[i][j] = max(dp[i][k]+dp[k][j]+决策,k为断点）</span><br><span class="line"># 枚举合并点，将问题分解成为左右两个部分，再将左右两个部分的最优值进行合并得到原问题的最优值。 </span><br><span class="line">区间DP的做法较为固定，即枚举区间长度，再枚举左端点，之后枚举区间的断点进行转移</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">memset(dp,0,sizeof(dp));</span><br><span class="line">//初始dp数组</span><br><span class="line">for(int len=2;len&lt;=n;len++)&#123;</span><br><span class="line">    //枚举区间长度</span><br><span class="line">    for(int i=0;i&lt;n;++i)&#123;//枚举区间的起点</span><br><span class="line">        int j=i+len;//根据起点和长度得出终点</span><br><span class="line">        if(j&gt;=n) break;//符合条件的终点</span><br><span class="line">        for(int k=i;k&lt;j;++k)//枚举最优分割点</span><br><span class="line">            dp[i][j]=min(dp[i][j],dp[i][k]+dp[k][j]+w[i][j]);//状态转移方程</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="516-最长回文子序列"><a href="#516-最长回文子序列" class="headerlink" title="516. 最长回文子序列"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvbG9uZ2VzdC1wYWxpbmRyb21pYy1zdWJzZXF1ZW5jZS8=" title="https://leetcode-cn.com/problems/longest-palindromic-subsequence/">516. 最长回文子序列<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestPalindromeSubseq</span><span class="params">(self, s: str)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># if s[i]==s[j]:</span></span><br><span class="line">        <span class="comment">#     dp[i][j] = dp[i+1][j-1] + 2</span></span><br><span class="line">        <span class="comment"># else:</span></span><br><span class="line">        <span class="comment">#     dp[i][j] = max(dp[i+1][j],dp[i][j-1])</span></span><br><span class="line"></span><br><span class="line">        n = len(s)</span><br><span class="line">        dp = [[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            dp[i][i] = <span class="number">1</span></span><br><span class="line">        <span class="comment"># 由右、下、右下推左上</span></span><br><span class="line">        <span class="comment"># for j in range(n):</span></span><br><span class="line">        <span class="comment">#     for i in range(j-1,-1,-1):</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>,n):</span><br><span class="line">                <span class="keyword">if</span> s[i]==s[j]:</span><br><span class="line">                    dp[i][j] = dp[i+<span class="number">1</span>][j<span class="number">-1</span>] + <span class="number">2</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[i][j] = max(dp[i+<span class="number">1</span>][j],dp[i][j<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][n<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h5 id="5-最长回文子串"><a href="#5-最长回文子串" class="headerlink" title="**5. 最长回文子串"></a>**<span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvbG9uZ2VzdC1wYWxpbmRyb21pYy1zdWJzdHJpbmcv" title="https://leetcode-cn.com/problems/longest-palindromic-substring/">5. 最长回文子串<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestPalindrome</span><span class="params">(self, s: str)</span> -&gt; str:</span></span><br><span class="line">        <span class="comment"># 中心扩散法</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">panlidrome</span><span class="params">(s,l,r)</span>:</span></span><br><span class="line">            <span class="keyword">while</span> l&gt;=<span class="number">0</span> <span class="keyword">and</span> r&lt;n <span class="keyword">and</span> s[l]==s[r]:</span><br><span class="line">                l -= <span class="number">1</span></span><br><span class="line">                r += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> s[l+<span class="number">1</span>:r]</span><br><span class="line">        res = <span class="string">''</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            even = panlidrome(s,i,i+<span class="number">1</span>)</span><br><span class="line">            odd = panlidrome(s,i,i)</span><br><span class="line">            res = res <span class="keyword">if</span> len(res)&gt;=len(even) <span class="keyword">else</span> even</span><br><span class="line">            res = res <span class="keyword">if</span> len(res)&gt;=len(odd) <span class="keyword">else</span> odd</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># # 动规</span></span><br><span class="line">        <span class="comment"># n = len(s)</span></span><br><span class="line">        <span class="comment"># dp = [[False]*n for _ in range(n)]</span></span><br><span class="line">        <span class="comment"># res = ''</span></span><br><span class="line">        <span class="comment"># for j in range(n):</span></span><br><span class="line">        <span class="comment">#     for i in range(j+1):</span></span><br><span class="line">        <span class="comment">#         if s[i]==s[j]:</span></span><br><span class="line">        <span class="comment">#             if j-i&lt;=2:</span></span><br><span class="line">        <span class="comment">#                 dp[i][j] = True</span></span><br><span class="line">        <span class="comment">#             else:</span></span><br><span class="line">        <span class="comment">#                 dp[i][j] = dp[i+1][j-1]</span></span><br><span class="line">        <span class="comment">#             if dp[i][j] and j-i+1&gt;len(res):</span></span><br><span class="line">        <span class="comment">#                 res = s[i:j+1]</span></span><br><span class="line">        <span class="comment"># return res</span></span><br></pre></td></tr></table></figure>

<h5 id="647-回文子串"><a href="#647-回文子串" class="headerlink" title="647. 回文子串"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvcGFsaW5kcm9taWMtc3Vic3RyaW5ncy8=" title="https://leetcode-cn.com/problems/palindromic-substrings/">647. 回文子串<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countSubstrings</span><span class="params">(self, s: str)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># n = len(s)</span></span><br><span class="line">        <span class="comment"># dp = [[False]*n for _ in range(n)]</span></span><br><span class="line">        <span class="comment"># for i in range(n):</span></span><br><span class="line">        <span class="comment">#     dp[i][i] = True</span></span><br><span class="line">        <span class="comment"># res = n</span></span><br><span class="line">        <span class="comment"># for j in range(n):</span></span><br><span class="line">        <span class="comment">#     for i in range(j):</span></span><br><span class="line">        <span class="comment">#         if s[i]==s[j]:</span></span><br><span class="line">        <span class="comment">#             if j-i&lt;3:</span></span><br><span class="line">        <span class="comment">#                 dp[i][j] = True</span></span><br><span class="line">        <span class="comment">#             else:</span></span><br><span class="line">        <span class="comment">#                 dp[i][j] = dp[i+1][j-1]</span></span><br><span class="line">        <span class="comment">#             if dp[i][j]:</span></span><br><span class="line">        <span class="comment">#                 res += 1</span></span><br><span class="line">        <span class="comment"># return res</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">center</span><span class="params">(l,r)</span>:</span></span><br><span class="line">            ans = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> l&gt;=<span class="number">0</span> <span class="keyword">and</span> r&lt;n <span class="keyword">and</span> s[l]==s[r]:</span><br><span class="line">                l -= <span class="number">1</span></span><br><span class="line">                r += <span class="number">1</span></span><br><span class="line">                ans += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">        n = len(s)</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            res += center(i,i+<span class="number">1</span>)</span><br><span class="line">            res += center(i,i)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<h5 id="1039-多边形三角剖分的最低得分"><a href="#1039-多边形三角剖分的最低得分" class="headerlink" title="1039. 多边形三角剖分的最低得分"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvbWluaW11bS1zY29yZS10cmlhbmd1bGF0aW9uLW9mLXBvbHlnb24v" title="https://leetcode-cn.com/problems/minimum-score-triangulation-of-polygon/">1039. 多边形三角剖分的最低得分<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minScoreTriangulation</span><span class="params">(self, A: List[int])</span> -&gt; int:</span></span><br><span class="line">        n = len(A)</span><br><span class="line">        dp = [[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]</span><br><span class="line">        <span class="keyword">for</span> lens <span class="keyword">in</span> range(<span class="number">2</span>,n):</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">                j = i+lens</span><br><span class="line">                <span class="keyword">if</span> j&gt;=n:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                dp[i][j] = float(<span class="string">'inf'</span>)</span><br><span class="line">                <span class="keyword">for</span> k <span class="keyword">in</span> range(i+<span class="number">1</span>,j):</span><br><span class="line">                    dp[i][j] = min(dp[i][j],dp[i][k]+dp[k][j]+A[i]*A[k]*A[j])</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][n<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h5 id="312-戳气球"><a href="#312-戳气球" class="headerlink" title="312. 戳气球"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvYnVyc3QtYmFsbG9vbnMv" title="https://leetcode-cn.com/problems/burst-balloons/">312. 戳气球<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxCoins</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># # 动规</span></span><br><span class="line">        <span class="comment"># nums = [1] + nums + [1]</span></span><br><span class="line">        <span class="comment"># n = len(nums)</span></span><br><span class="line">        <span class="comment"># dp = [[0]*n for _ in range(n)]</span></span><br><span class="line">        <span class="comment"># for i in range(n-1,-1,-1):</span></span><br><span class="line">        <span class="comment">#     for j in range(i+1,n):</span></span><br><span class="line">        <span class="comment">#         if j-i&lt;=1:</span></span><br><span class="line">        <span class="comment">#             continue</span></span><br><span class="line">        <span class="comment">#         for k in range(i+1,j):</span></span><br><span class="line">        <span class="comment">#             dp[i][j] = max(dp[i][j],dp[i][k]+dp[k][j]+nums[i]*nums[k]*nums[j])</span></span><br><span class="line">        <span class="comment"># return dp[0][n-1]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 动规</span></span><br><span class="line">        nums = [<span class="number">1</span>] + nums + [<span class="number">1</span>]</span><br><span class="line">        n = len(nums)</span><br><span class="line">        dp = [[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]</span><br><span class="line">        <span class="keyword">for</span> lens <span class="keyword">in</span> range(<span class="number">2</span>,n):</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">                j = i+lens</span><br><span class="line">                <span class="keyword">if</span> j&gt;n<span class="number">-1</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">for</span> k <span class="keyword">in</span> range(i+<span class="number">1</span>,j):</span><br><span class="line">                    dp[i][j] = max(dp[i][j],dp[i][k]+dp[k][j]+nums[i]*nums[k]*nums[j])</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][n<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># from functools import lru_cache</span></span><br><span class="line">        <span class="comment"># nums = [1]+nums+[1]</span></span><br><span class="line">        <span class="comment"># @lru_cache(None)</span></span><br><span class="line">        <span class="comment"># def helper(l,r):</span></span><br><span class="line">        <span class="comment">#     # 区间长度为2时，即只剩1,1</span></span><br><span class="line">        <span class="comment">#     if r-l==1:</span></span><br><span class="line">        <span class="comment">#         return 0</span></span><br><span class="line">        <span class="comment">#     tmp = 0</span></span><br><span class="line">        <span class="comment">#     for i in range(l+1,r):</span></span><br><span class="line">        <span class="comment">#         tmp = max(tmp,nums[l]*nums[i]*nums[r]+helper(l,i)+helper(i,r))</span></span><br><span class="line">        <span class="comment">#     return tmp</span></span><br><span class="line">        <span class="comment"># return helper(0,len(nums)-1)</span></span><br></pre></td></tr></table></figure>

<h3 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a>背包问题</h3><h4 id="0-1背包"><a href="#0-1背包" class="headerlink" title="0-1背包"></a>0-1背包</h4><hr>
<ul>
<li><p>有N件物品和一个容量为V的背包。第i件物品的费用是c[i]，价值是w[i]。求解将哪些物品装入背包可使价值总和最大。</p>
</li>
<li><p>特点：<strong>每种物品仅有一件</strong>，可以选择放或不放。</p>
</li>
<li><p>状态转移方程：$F[i,v]=max(F[i-1,v],F[i-1,v-c_i]+w_i)$,即前i件物品放入一个容量为v的背包时可获得的最大价值</p>
</li>
<li><p>初始化的细节问题：<strong>要求恰好装满背包</strong>，那么在初始化时除了F[0]为0,其它F[1…V]均设为$-\infty$，这样就可以保证最终得到的f[N]是一种恰好装满背包的最优解。<strong>只希望价格尽量大</strong>，初始化时应该将 F[0..V ] 全部设为0</p>
</li>
<li><p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 二维</span></span><br><span class="line">N,V = map(int,input().split())</span><br><span class="line">c,w = [<span class="number">0</span>],[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(N):</span><br><span class="line">    line = list(map(int,input().split()))</span><br><span class="line">    c.append(line[<span class="number">0</span>])</span><br><span class="line">    w.append(line[<span class="number">1</span>])</span><br><span class="line">    </span><br><span class="line">dp = [[<span class="number">0</span>]*(V+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">1</span>)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,N+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> range(<span class="number">1</span>,V+<span class="number">1</span>):</span><br><span class="line">        <span class="comment"># 第i个物品不选择时</span></span><br><span class="line">        dp[i][v] = dp[i<span class="number">-1</span>][v]</span><br><span class="line">        <span class="keyword">if</span> v&gt;=c[i<span class="number">-1</span>]:</span><br><span class="line">            <span class="comment"># 背包容量v大于第i件物品费用时，选择最大值</span></span><br><span class="line">            dp[i][v] = max(dp[i][v],dp[i<span class="number">-1</span>][v-c[i]]+w[i])</span><br><span class="line">print(dp[<span class="number">-1</span>][<span class="number">-1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="comment"># 由二维优化到一维</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> range(V,c[i]<span class="number">-1</span>,<span class="number">-1</span>): <span class="comment">################从后往前</span></span><br><span class="line">        dp[v] = max(dp[v],dp[v-c[i]]+w[i])</span><br><span class="line">print(dp[<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>时间复杂度为O(NV)，空间复杂度为O(V)</p>
</li>
</ul>
<h4 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h4><hr>
<ul>
<li><p>特点：<strong>每种物品都有无限件可用</strong></p>
</li>
<li><p>状态转移方程：$F[i,v]=max(F[i-1,v-kc_i]+kw_i|0\le kc_i\le v)$,即前i件物品放入一个容量为v的背包时可获得的最大价值，每件物品可能取k次，等价为$F[i,v] = max(F[i−1,v],F[i,v−c_i] + w_i) $，即将第一个式子v-c_i替换v结合得到</p>
</li>
<li><p>优化问题：</p>
<ul>
<li>若两件物品i,j，满足$c_i\le c_j \ \ and \ \ w_i \ge w_j$，则删除j</li>
<li>删除$c_i&gt;V$的i，并做排序，可以找出费用相同的物品中价值最高的是哪个</li>
</ul>
</li>
<li><p>其他想法：转化为01背包问题求解</p>
<ul>
<li>把每件物品转换为$V//c_i$件物品，费用和价值不变</li>
<li>二进制优化：将每件物品转换为费用为$c_i2^k$，价值为$w_i2^k$的若干件物品，k为$c_i2^k\le V$的非负整数</li>
</ul>
</li>
<li><p>代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一维按0-1背包问题，即每次选物品可以选择k次，kc_i&lt;=v，对应第一个状态转移方程</span></span><br><span class="line">dp = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> range(V,<span class="number">-1</span>,<span class="number">-1</span>): <span class="comment">####从后往前</span></span><br><span class="line">        k = v//c[i]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(k+<span class="number">1</span>):</span><br><span class="line">            dp[v] = max(dp[v],dp[v-j*c[i]]+j*w[i])</span><br><span class="line">print(dp[<span class="number">-1</span>])</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 一维优化，对应第二个状态转移方程    </span></span><br><span class="line">dp = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> range(V+<span class="number">1</span>): <span class="comment">#####从前往后</span></span><br><span class="line">        <span class="keyword">if</span> v&gt;= c[i]:</span><br><span class="line">            dp[v] = max(dp[v],dp[v-c[i]]+w[i])</span><br><span class="line">print(dp[<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>时间复杂度为O(NV)，空间复杂度为O(V)</p>
</li>
</ul>
<h4 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h4><ul>
<li><p>特点：<strong>每种物品i最多选择m[i]件</strong></p>
</li>
<li><p>状态转移方程：$F[i,v]=max(F[i-1,v-kc_i]+kw_i|0\le k\le m_i \ \ and \ \ 0\le kc_i \le v)$,即前i件物品放入一个容量为v的背包时可获得的最大价值，每件物品可能取k次</p>
</li>
<li><p>其他想法：转化为01背包问题求解</p>
<ul>
<li><p>二进制优化，每件物品限制的个数为$m_i$，则取$floor(log_2(m_i))+1$组，其中个数分别为$2^k,k=0,1,2…floor(log_2(m_i))$，最后一组为剩下的个数，则对应的费用则为$c_i<em>个数$，价值为$w_i</em>个数$的若干件物品</p>
</li>
<li><p>单调队列优化：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f[i,v] = max(f[i-1,v-kc_i]+kw_i|0&lt;=k&lt;=m_i and 0&lt;=kc_i&lt;=v)</span><br><span class="line">令 a=v/c_i,b=v%c_i ==&gt; v=ac_i+b ==&gt; f[i,v] = max(f[i-1,b+(a-k)c_i]+kw_i|0&lt;=k&lt;=m_i and 0&lt;=kc_i&lt;=v) 令k=a-k ==&gt; f[i,v] = max(f[i-1,b+kc_i]-kw_i)+aw_i|a-m_i&lt;=k&lt;=a and 0&lt;=(a-k)c_i&lt;=v</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一维按0-1背包问题，即每次选物品可以选择k次，kc_i&lt;=v and k&lt;=m_i，对应第一个状态转移方程</span></span><br><span class="line">dp = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> range(V,<span class="number">-1</span>,<span class="number">-1</span>): <span class="comment">####从后往前</span></span><br><span class="line">        k = min(v//c[i],m[i])</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(k+<span class="number">1</span>):</span><br><span class="line">            dp[v] = max(dp[v],dp[v-j*c[i]]+j*w[i])</span><br><span class="line">print(dp[<span class="number">-1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V = map(int,input().split())</span><br><span class="line">        c,w,m = [],[],[]</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(N):</span><br><span class="line">            line = list(map(int,input().split()))</span><br><span class="line">            c.append(line[<span class="number">0</span>])</span><br><span class="line">            w.append(line[<span class="number">1</span>])</span><br><span class="line">            m.append(line[<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># 二进制优化 O(NVlogM)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        k = <span class="number">1</span></span><br><span class="line">        <span class="comment"># k为1,2,4,8...，m[i]则逐步减少，最后m[i]为剩余的数量&gt;0</span></span><br><span class="line">        <span class="keyword">while</span> k&lt;m[i]:</span><br><span class="line">            c.append(k*c[i])</span><br><span class="line">            w.append(k*w[i])</span><br><span class="line">            m[i] -= k</span><br><span class="line">            k *= <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> m[i]: <span class="comment">#肯定成立</span></span><br><span class="line">            c[i] = m[i]*c[i]</span><br><span class="line">            w[i] = m[i]*w[i]</span><br><span class="line">    <span class="comment"># 0-1背包</span></span><br><span class="line">    dp = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line">    N = len(c) <span class="comment"># N更新</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        <span class="keyword">for</span> v <span class="keyword">in</span> range(V,<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">if</span> v&gt;=c[i]:</span><br><span class="line">                dp[v] = max(dp[v],dp[v-c[i]]+w[i])</span><br><span class="line">    print(dp[<span class="number">-1</span>])</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># 单调队列优化O(NV)</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V = map(int,input().split())</span><br><span class="line">        c,w,m = [],[],[]</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(N):</span><br><span class="line">            line = list(map(int,input().split()))</span><br><span class="line">            c.append(line[<span class="number">0</span>])</span><br><span class="line">            w.append(line[<span class="number">1</span>])</span><br><span class="line">            m.append(line[<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line">    dp = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line">    queue = deque([[<span class="number">0</span>,<span class="number">0</span>] <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]) <span class="comment"># 每一轮最值的k和dp值</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        <span class="keyword">for</span> b <span class="keyword">in</span> range(c[i]):</span><br><span class="line">            head,tail = <span class="number">0</span>,<span class="number">0</span> <span class="comment"># 队首，队尾</span></span><br><span class="line">            stop = (V-b)//c[i] <span class="comment"># b+kci&lt;=V</span></span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> range(stop+<span class="number">1</span>):</span><br><span class="line">                temp = dp[k*c[i]+b]-k*w[i]</span><br><span class="line">                <span class="comment"># 保证队列单调递减，队尾为dp[k*c[i]+b]-k*w[i]</span></span><br><span class="line">                <span class="keyword">while</span> head&lt;tail <span class="keyword">and</span> temp&gt;=queue[tail<span class="number">-1</span>][<span class="number">-1</span>]:</span><br><span class="line">                    tail -= <span class="number">1</span></span><br><span class="line">                queue[tail] = [k,temp]</span><br><span class="line">                tail += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> queue[head][<span class="number">0</span>]&lt;k-m[i]:</span><br><span class="line">                    head += <span class="number">1</span></span><br><span class="line">                <span class="comment"># queue的头部为最大值 </span></span><br><span class="line">                <span class="comment"># dp[b+kc_i] = max&#123;dp[b+jc_i]-jw_i|0&lt;=j&lt;=k&#125;+kw_i</span></span><br><span class="line">                dp[k*c[i]+b] = queue[head][<span class="number">-1</span>] + k*w[i]</span><br><span class="line">    print(dp[<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>时间复杂度为O(NV)，空间复杂度为O(V)</p>
</li>
</ul>
<h4 id="混合背包"><a href="#混合背包" class="headerlink" title="混合背包"></a>混合背包</h4><ul>
<li><p>特点：即<strong>所有的物品可能有三种状态</strong>，当$m_i有-1,0,&gt;0三种状态，分别表示0-1，完全，多重$</p>
</li>
<li><p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,c,m,w)</span>:</span></span><br><span class="line">        self.c = c</span><br><span class="line">        self.m = m</span><br><span class="line">        self.w = w</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V = map(int,input().split())</span><br><span class="line">        nums = []</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(N):</span><br><span class="line">            c,w,m = map(int,input().split())</span><br><span class="line">            <span class="keyword">if</span> m&lt;=<span class="number">0</span>:</span><br><span class="line">                nums.append(Node(c,m,w))</span><br><span class="line">            <span class="keyword">else</span>: <span class="comment">#将混合背包二进制优化</span></span><br><span class="line">                k = <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> k&lt;=m:</span><br><span class="line">                    nums.append(Node(k*c,<span class="number">-1</span>,k*w))</span><br><span class="line">                    m -= k</span><br><span class="line">                    k *= <span class="number">2</span></span><br><span class="line">                <span class="keyword">if</span> m:</span><br><span class="line">                    nums.append(Node(m*c,<span class="number">-1</span>,m*w))</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    N = len(nums)</span><br><span class="line">    dp = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        <span class="keyword">if</span> nums[i].m==<span class="number">-1</span>:</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> range(V,nums[i].c<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">                dp[v] = max(dp[v],dp[v-nums[i].c]+nums[i].w)</span><br><span class="line">        <span class="keyword">elif</span> nums[i].m==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> range(nums[i].c,V+<span class="number">1</span>):</span><br><span class="line">                dp[v] = max(dp[v],dp[v-nums[i].c]+nums[i].w)</span><br><span class="line">    print(dp[<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="二维费用背包"><a href="#二维费用背包" class="headerlink" title="二维费用背包"></a>二维费用背包</h4><ul>
<li><p>特点：<strong>即0-1背包问题的基础上，增加一个重量限制</strong></p>
</li>
<li><p>状态转移方程：$F[i,v,m]=max(F[i-1,v,m],F[i-1,v-c_i,m-m_i]+w_i)$，即前i件物品放入一个容量为v，质量限制为m的背包时可获得的最大价值</p>
</li>
<li><p>代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,c,m,w)</span>:</span></span><br><span class="line">        self.c = c</span><br><span class="line">        self.m = m</span><br><span class="line">        self.w = w</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V,M = map(int,input().split())</span><br><span class="line">        nums = []</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(N):</span><br><span class="line">            c,m,w = map(int,input().split())</span><br><span class="line">            nums.append(Node(c,m,w))</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    dp = [[<span class="number">0</span>]*(M+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        <span class="keyword">for</span> v <span class="keyword">in</span> range(V,nums[i].c<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">for</span> m <span class="keyword">in</span> range(M,nums[i].m<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">                dp[v][m] = max(dp[v][m],dp[v-nums[i].c][m-nums[i].m]+nums[i].w)</span><br><span class="line">    print(dp[<span class="number">-1</span>][<span class="number">-1</span>])</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">########################################</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V,M = map(int,input().split())</span><br><span class="line">        nums = []</span><br><span class="line">        dp = [[<span class="number">0</span>]*(M+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(N):</span><br><span class="line">            c,m,w = map(int,input().split())</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> range(V,c<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> range(M,m<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">                    dp[v][j] = max(dp[v][j],dp[v-c][j-m]+w)          </span><br><span class="line">        print(dp[<span class="number">-1</span>][<span class="number">-1</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="分组背包"><a href="#分组背包" class="headerlink" title="分组背包"></a>分组背包</h4><ul>
<li><p>特点：<strong>即0-1背包问题的基础上，所有物品被分为若干组N，每一组有s_i件物品，但最多只能选择一件物品，即分组互斥</strong></p>
</li>
<li><p>状态转移方程：$F[i,v]=max(F[i-1,v],F[i-1,v-c_{s_j}]+w_{s_j}|j=1…s)$,即<strong>前i组</strong>物品放入一个容量为v时可获得的最大价值</p>
</li>
<li><p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,c,w)</span>:</span></span><br><span class="line">        self.c = c</span><br><span class="line">        self.w = w</span><br><span class="line">        </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V = map(int,input().split())</span><br><span class="line">        nums = []</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(N):</span><br><span class="line">            s = int(input())</span><br><span class="line">            tmp = []</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(s):</span><br><span class="line">                c,w = map(int,input().split())</span><br><span class="line">                tmp.append(Node(c,w))</span><br><span class="line">            nums.append(tmp)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    dp = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        <span class="keyword">for</span> v <span class="keyword">in</span> range(V,<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">for</span> s <span class="keyword">in</span> range(len(nums[i])):</span><br><span class="line">                <span class="keyword">if</span> v&gt;=nums[i][s].c:</span><br><span class="line">                    dp[v] = max(dp[v],dp[v-nums[i][s].c]+nums[i][s].w)</span><br><span class="line">    print(dp[<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="有依赖的背包-hard"><a href="#有依赖的背包-hard" class="headerlink" title="有依赖的背包(hard)"></a>有依赖的背包(hard)</h4><ul>
<li><p>特点：<strong>即所有物品构成一棵树，选择时有依赖关系，选择某个结点时，其父结点也必须选择</strong></p>
</li>
<li><p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addedge</span><span class="params">(u,v)</span>:</span> <span class="comment">#建立链式前向星，a起点指向b终点</span></span><br><span class="line">    <span class="keyword">global</span> idx</span><br><span class="line">    e[idx] = v <span class="comment">#每个输入边的终点,这里即输入的编号</span></span><br><span class="line">    ne[idx] = h[u] <span class="comment">#用来表示以idx为起点的下一条边在e中存储的位置,这里的第一条边存储的位置其实在以idx为起点的所有边的最后输入的那个idx</span></span><br><span class="line">    h[u] = idx <span class="comment">#以u为起点的第一条边在e的存储位置</span></span><br><span class="line">    idx += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(root,dp)</span>:</span></span><br><span class="line">    i = h[root] <span class="comment">#以root为起点的一条边的序号</span></span><br><span class="line">    <span class="keyword">while</span> i!=<span class="number">-1</span>:</span><br><span class="line">        son = e[i] <span class="comment">#子结点</span></span><br><span class="line">        dfs(son,dp)</span><br><span class="line">        <span class="keyword">for</span> v <span class="keyword">in</span> range(V-c[root],<span class="number">-1</span>,<span class="number">-1</span>): <span class="comment">#必须留出根结点的容量，才能拿它的子结点</span></span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">1</span>,v+<span class="number">1</span>): <span class="comment">#将不同的子树选择看作分组背包问题</span></span><br><span class="line">                <span class="comment"># 从子树更新最大价值</span></span><br><span class="line">                dp[root][v] = max(dp[root][v],dp[root][v-k]+dp[son][k])</span><br><span class="line">        i = ne[i]</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> range(V,c[root]<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">        <span class="comment"># 背包容量足够时，则加上当前结点</span></span><br><span class="line">        dp[root][v] = dp[root][v-c[root]]+w[root]</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> range(<span class="number">0</span>,c[root]):</span><br><span class="line">        <span class="comment"># 背包容量不够时，该结点及子结点均不能放入</span></span><br><span class="line">        dp[root][v] = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V = map(int,input().split())</span><br><span class="line">        c = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">1</span>)]</span><br><span class="line">        w = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">1</span>)]</span><br><span class="line">        e = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">1</span>)]</span><br><span class="line">        ne = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">1</span>)]</span><br><span class="line">        h = [<span class="number">-1</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">1</span>)]</span><br><span class="line">        idx = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,N+<span class="number">1</span>):</span><br><span class="line">            line = list(map(int,input().split())) </span><br><span class="line">            <span class="comment">#line[-1]表示该物品的父结点</span></span><br><span class="line">            <span class="keyword">if</span> line[<span class="number">-1</span>]==<span class="number">-1</span>:</span><br><span class="line">                root = i</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                addedge(line[<span class="number">-1</span>],i)</span><br><span class="line">            c[i] = line[<span class="number">0</span>]</span><br><span class="line">            w[i] = line[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    dp = [[<span class="number">0</span>]*(V+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">1</span>)]</span><br><span class="line">    dfs(root,dp)</span><br><span class="line">    print(dp[root][<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="背包的方案数"><a href="#背包的方案数" class="headerlink" title="背包的方案数"></a>背包的方案数</h4><ul>
<li><p>特点：求最优时的方案数</p>
</li>
<li><p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V = map(int,input().split())</span><br><span class="line">        dp = [float(<span class="string">'-inf'</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)] <span class="comment">#恰好</span></span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">        res = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line">        res[<span class="number">0</span>] = <span class="number">1</span> <span class="comment">#v为0的时候只有一种方案</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">            c,w = map(int, input().split())</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> range(V,c<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">                tmp = max(dp[v],dp[v-c]+w)</span><br><span class="line">                s = <span class="number">0</span></span><br><span class="line">                <span class="keyword">if</span> tmp==dp[v]:</span><br><span class="line">                    s += res[v]</span><br><span class="line">                <span class="keyword">if</span> tmp==dp[v-c]+w:</span><br><span class="line">                    s += res[v-c]</span><br><span class="line">                dp[v] = tmp</span><br><span class="line">                res[v] = s%<span class="number">1000000007</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># 统计最大价值w,可能对应多个v</span></span><br><span class="line">    maxw = float(<span class="string">'-inf'</span>)</span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> range(V+<span class="number">1</span>):</span><br><span class="line">        maxw = max(maxw,dp[v])</span><br><span class="line">    ans = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> range(V+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> maxw==dp[v]:</span><br><span class="line">            ans = (ans+res[v])%<span class="number">1000000007</span></span><br><span class="line">    print(ans)</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="背包的方案"><a href="#背包的方案" class="headerlink" title="背包的方案"></a>背包的方案</h4><ul>
<li><p>特点：求0-1背包时的最优方案，按照字典序最小的方法排列(即1,4和2,3均满足条件时，选择1,4)</p>
</li>
<li><p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V = map(int,input().split())</span><br><span class="line">        c,w = [<span class="number">0</span>],[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,N+<span class="number">1</span>):</span><br><span class="line">            line = list(map(int, input().split()))</span><br><span class="line">            c.append(line[<span class="number">0</span>])</span><br><span class="line">            w.append(line[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    dp = [[<span class="number">0</span>]*(V+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">2</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N,<span class="number">0</span>,<span class="number">-1</span>):</span><br><span class="line">        <span class="keyword">for</span> v <span class="keyword">in</span> range(V+<span class="number">1</span>):</span><br><span class="line">            dp[i][v] = dp[i+<span class="number">1</span>][v]</span><br><span class="line">            <span class="keyword">if</span> v&gt;=c[i]:</span><br><span class="line">                dp[i][v] = max(dp[i][v],dp[i+<span class="number">1</span>][v-c[i]]+w[i])</span><br><span class="line">    vol = V</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,N+<span class="number">1</span>):</span><br><span class="line">        <span class="comment"># print(c[i])</span></span><br><span class="line">        <span class="comment"># print(dp[i][vol])</span></span><br><span class="line">        <span class="comment"># eg:当i=1时，因为是逆序遍历N的，所以dp[1][V]肯定是最大价值，当其与dp[2][V-c[1]]+w[1]相等时，则说明选择了1</span></span><br><span class="line">        <span class="keyword">if</span> vol&gt;=c[i] <span class="keyword">and</span> dp[i][vol] == dp[i+<span class="number">1</span>][vol-c[i]]+w[i]:</span><br><span class="line">            print(i,end=<span class="string">' '</span>)</span><br><span class="line">            vol -= c[i]</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="comment"># 反正上述代码中dp[0]一直没被用到，故减少一行        </span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        N,V = map(int,input().split())</span><br><span class="line">        c,w = [],[]</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(N):</span><br><span class="line">            line = list(map(int, input().split()))</span><br><span class="line">            c.append(line[<span class="number">0</span>])</span><br><span class="line">            w.append(line[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    dp = [[<span class="number">0</span>]*(V+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">        <span class="keyword">for</span> v <span class="keyword">in</span> range(V+<span class="number">1</span>):</span><br><span class="line">            dp[i][v] = dp[i+<span class="number">1</span>][v]</span><br><span class="line">            <span class="keyword">if</span> v&gt;=c[i]:</span><br><span class="line">                dp[i][v] = max(dp[i][v],dp[i+<span class="number">1</span>][v-c[i]]+w[i])</span><br><span class="line">    vol = V</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        <span class="comment"># eg:当i=1时，因为是逆序遍历N的，所以dp[1][V]肯定是最大价值，当其与dp[2][V-c[1]]+w[1]相等时，则说明选择了1</span></span><br><span class="line">        <span class="keyword">if</span> vol&gt;=c[i] <span class="keyword">and</span> dp[i][vol] == dp[i+<span class="number">1</span>][vol-c[i]]+w[i]:</span><br><span class="line">            print(i+<span class="number">1</span>,end=<span class="string">' '</span>) <span class="comment"># 从1开始编号的</span></span><br><span class="line">            vol -= c[i]</span><br><span class="line"></span><br><span class="line">            </span><br><span class="line">// c++版本</span><br><span class="line"><span class="comment">#include&lt;iostream&gt;</span></span><br><span class="line">using namespace std;</span><br><span class="line">int main()&#123;</span><br><span class="line">    int N=<span class="number">0</span>;</span><br><span class="line">    int V=<span class="number">0</span>;</span><br><span class="line">    cin&gt;&gt;N&gt;&gt;V;</span><br><span class="line">    int c[N+<span class="number">1</span>],w[N+<span class="number">1</span>]=&#123;&#125;; //一定要初始化</span><br><span class="line">    int dp[N+<span class="number">1</span>][V+<span class="number">1</span>]=&#123;&#125;; //一定要初始化</span><br><span class="line">    <span class="keyword">for</span> (int i=<span class="number">0</span>;i&lt;N;i++) cin&gt;&gt;c[i]&gt;&gt;w[i];</span><br><span class="line">    <span class="keyword">for</span> (int i=N<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">for</span> (int v=<span class="number">0</span>;v&lt;=V;v++)&#123;</span><br><span class="line">            dp[i][v] = dp[i+<span class="number">1</span>][v];</span><br><span class="line">            <span class="keyword">if</span> (v&gt;=c[i])</span><br><span class="line">                dp[i][v] = max(dp[i][v],dp[i+<span class="number">1</span>][v-c[i]]+w[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    int vol=V;</span><br><span class="line">    <span class="keyword">for</span> (int i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (vol&gt;=c[i] &amp;&amp; dp[i][vol]==dp[i+<span class="number">1</span>][vol-c[i]]+w[i])&#123;</span><br><span class="line">            cout&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">' '</span>;</span><br><span class="line">            vol-=c[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h4><h5 id="416-分割等和子集"><a href="#416-分割等和子集" class="headerlink" title="416. 分割等和子集"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvcGFydGl0aW9uLWVxdWFsLXN1YnNldC1zdW0v" title="https://leetcode-cn.com/problems/partition-equal-subset-sum/">416. 分割等和子集<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">canPartition</span><span class="params">(self, nums: List[int])</span> -&gt; bool:</span></span><br><span class="line">        <span class="comment"># 0-1背包</span></span><br><span class="line">        total = sum(nums)</span><br><span class="line">        <span class="comment"># 奇数则不可能</span></span><br><span class="line">        <span class="keyword">if</span> total&amp;<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        V = total//<span class="number">2</span></span><br><span class="line">        N = len(nums)</span><br><span class="line">        dp = [<span class="literal">False</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(V+<span class="number">1</span>)]</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> range(V,nums[i]<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">                dp[v] = dp[v] <span class="keyword">or</span> dp[v-nums[i]]</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># # 0-1背包</span></span><br><span class="line">        <span class="comment"># total = sum(nums)</span></span><br><span class="line">        <span class="comment"># # 奇数则不可能</span></span><br><span class="line">        <span class="comment"># if total&amp;1:</span></span><br><span class="line">        <span class="comment">#     return False</span></span><br><span class="line">        <span class="comment"># V = total//2</span></span><br><span class="line">        <span class="comment"># N = len(nums)</span></span><br><span class="line">        <span class="comment"># dp = [float('-inf') for _ in range(V+1)] #恰好</span></span><br><span class="line">        <span class="comment"># dp[0] = 0</span></span><br><span class="line">        <span class="comment"># for i in range(N):</span></span><br><span class="line">        <span class="comment">#     for v in range(V,nums[i]-1,-1):</span></span><br><span class="line">        <span class="comment">#         dp[v] = max(dp[v],dp[v-nums[i]]+nums[i])</span></span><br><span class="line">        <span class="comment"># return dp[-1]==V</span></span><br></pre></td></tr></table></figure>

<h5 id="494-目标和"><a href="#494-目标和" class="headerlink" title="494. 目标和"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvdGFyZ2V0LXN1bS8=" title="https://leetcode-cn.com/problems/target-sum/">494. 目标和<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findTargetSumWays</span><span class="params">(self, nums: List[int], S: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># # sum(P)-sum(N)=S ==&gt; sum(P)-(sum(T)-sum(P))=S ==&gt; 2sum(P)=S+sum(T)</span></span><br><span class="line">        <span class="comment"># total = sum(nums)</span></span><br><span class="line">        <span class="comment"># if total&lt;S or (total+S)&amp;1:</span></span><br><span class="line">        <span class="comment">#     return 0</span></span><br><span class="line">        <span class="comment"># V = (total+S)//2</span></span><br><span class="line">        <span class="comment"># N = len(nums)</span></span><br><span class="line">        <span class="comment"># dp = [0 for _ in range(V+1)]</span></span><br><span class="line">        <span class="comment"># dp[0] = 1</span></span><br><span class="line">        <span class="comment"># for i in range(N):</span></span><br><span class="line">        <span class="comment">#     for v in range(V,nums[i]-1,-1):</span></span><br><span class="line">        <span class="comment">#         dp[v] += dp[v-nums[i]]</span></span><br><span class="line">        <span class="comment"># return dp[-1]</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line">        n = len(nums)</span><br><span class="line"><span class="meta">        @lru_cache(None)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(i,sums)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> i==n:</span><br><span class="line">                <span class="keyword">return</span> int(S==sums)</span><br><span class="line">            <span class="keyword">return</span> helper(i+<span class="number">1</span>,sums+nums[i]) + helper(i+<span class="number">1</span>,sums-nums[i])</span><br><span class="line">        <span class="keyword">return</span> helper(<span class="number">0</span>,<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h5 id="322-零钱兑换"><a href="#322-零钱兑换" class="headerlink" title="322. 零钱兑换"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvY29pbi1jaGFuZ2Uv" title="https://leetcode-cn.com/problems/coin-change/">322. 零钱兑换<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">coinChange</span><span class="params">(self, coins: List[int], amount: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line">        res = float(<span class="string">'inf'</span>)</span><br><span class="line"><span class="meta">        @lru_cache(None)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(level,sums)</span>:</span></span><br><span class="line">            <span class="keyword">nonlocal</span> res</span><br><span class="line">            <span class="keyword">if</span> sums&gt;amount:</span><br><span class="line">                <span class="keyword">return</span> </span><br><span class="line">            <span class="keyword">if</span> sums==amount:</span><br><span class="line">                res = min(res,level)</span><br><span class="line">                <span class="keyword">return</span> </span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> coins:</span><br><span class="line">                helper(level+<span class="number">1</span>,sums+j)</span><br><span class="line">        helper(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> res <span class="keyword">if</span> res!=float(<span class="string">'inf'</span>) <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># bfs</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> coins:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> amount==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        coins.sort()</span><br><span class="line">        <span class="keyword">if</span> coins[<span class="number">0</span>]&gt;amount:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line">        queue = deque()</span><br><span class="line">        queue.append((amount,<span class="number">0</span>))</span><br><span class="line">        visited = &#123;&#125;</span><br><span class="line">        <span class="keyword">while</span> queue:</span><br><span class="line">            lens = len(queue)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(lens):</span><br><span class="line">                j,level = queue.popleft()</span><br><span class="line">                <span class="keyword">if</span> j <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                    visited[j] = <span class="number">1</span></span><br><span class="line">                    <span class="keyword">for</span> c <span class="keyword">in</span> coins:</span><br><span class="line">                        <span class="keyword">if</span> j-c&gt;=<span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> visited.get(j-c):</span><br><span class="line">                            queue.append((j-c,level+<span class="number">1</span>))</span><br><span class="line">                            <span class="keyword">if</span> j-c==<span class="number">0</span>:</span><br><span class="line">                                <span class="keyword">return</span> level+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 完全背包求最小的选择数 dp[i][v] = min&#123;dp[i-1][v],dp[i-1][v-kc_j]+k&#125;</span></span><br><span class="line">        <span class="comment"># N = len(coins)</span></span><br><span class="line">        <span class="comment"># dp = [float('inf') for _ in range(amount+1)]</span></span><br><span class="line">        <span class="comment"># dp[0] = 0</span></span><br><span class="line">        <span class="comment"># for i in range(N):</span></span><br><span class="line">        <span class="comment">#     for v in range(coins[i],amount+1):</span></span><br><span class="line">        <span class="comment">#         dp[v] = min(dp[v],dp[v-coins[i]]+1)</span></span><br><span class="line">        <span class="comment"># return dp[-1] if dp[-1]!=float('inf') else -1</span></span><br></pre></td></tr></table></figure>

<h5 id="518-零钱兑换-II"><a href="#518-零钱兑换-II" class="headerlink" title="518. 零钱兑换 II"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvY29pbi1jaGFuZ2UtMi8=" title="https://leetcode-cn.com/problems/coin-change-2/">518. 零钱兑换 II<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(self, amount: int, coins: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># 完全背包求方案数</span></span><br><span class="line">        <span class="comment"># dp[i][v] = dp[i-1][v]+dp[i-1][v-c_j]+...+dp[i-1][v-kc_j] </span></span><br><span class="line">        <span class="comment">#          -&gt; dp[i][v] = dp[i-1][v]+dp[i-1][v-c_j]</span></span><br><span class="line">        <span class="comment"># 一维</span></span><br><span class="line">        dp = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(amount+<span class="number">1</span>)]</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i,coin <span class="keyword">in</span> enumerate(coins):</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> range(coin,amount+<span class="number">1</span>):</span><br><span class="line">                dp[v] += dp[v-coin]</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 二维</span></span><br><span class="line">        dp = [[<span class="number">0</span>]*(amount+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(len(coins)+<span class="number">1</span>)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(coins)+<span class="number">1</span>):</span><br><span class="line">            dp[i][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(coins)+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> range(<span class="number">1</span>,amount+<span class="number">1</span>):</span><br><span class="line">                dp[i][v] = dp[i<span class="number">-1</span>][v]</span><br><span class="line">                <span class="keyword">if</span> v&gt;=coins[i<span class="number">-1</span>]:</span><br><span class="line">                    dp[i][v] += dp[i][v-coins[i<span class="number">-1</span>]]</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h5 id="474-一和零"><a href="#474-一和零" class="headerlink" title="474. 一和零"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvb25lcy1hbmQtemVyb2VzLw==" title="https://leetcode-cn.com/problems/ones-and-zeroes/">474. 一和零<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findMaxForm</span><span class="params">(self, strs: List[str], m: int, n: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">        dp = [[<span class="number">0</span>]*(n+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(m+<span class="number">1</span>)]</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">        nums = &#123;k:Counter(v) <span class="keyword">for</span> k,v <span class="keyword">in</span> enumerate(strs)&#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            num0 = nums[i].get(<span class="string">'0'</span>,<span class="number">0</span>)</span><br><span class="line">            num1 = nums[i].get(<span class="string">'1'</span>,<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m,num0<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">                <span class="keyword">for</span> v <span class="keyword">in</span> range(n,num1<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">                    dp[j][v] = max(dp[j][v],dp[j-num0][v-num1]+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h5 id="编程题-运矿石"><a href="#编程题-运矿石" class="headerlink" title="[编程题]运矿石"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cubm93Y29kZXIuY29tL3F1ZXN0aW9uVGVybWluYWwvYjU4ZjkyMmNjOTI0NDc4ZmExZTJkY2EyY2M0ZjRlYjc/YW5zd2VyVHlwZT0xJmY9ZGlzY3Vzc2lvbg==" title="https://www.nowcoder.com/questionTerminal/b58f922cc924478fa1e2dca2cc4f4eb7?answerType=1&f=discussion">[编程题]运矿石<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span><span class="params">(stone_list)</span>:</span></span><br><span class="line">    n = len(stone_list)</span><br><span class="line">    total = sum(stone_list)</span><br><span class="line">    res = float(<span class="string">'inf'</span>)</span><br><span class="line">    seen = set()</span><br><span class="line">    <span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line"><span class="meta">    @lru_cache(None)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(k,sums)</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> res</span><br><span class="line">        <span class="comment"># 假设取得较小的那一部分，当==n/2时，另一边为n//2 or n//2+1</span></span><br><span class="line">        <span class="keyword">if</span> k==n//<span class="number">2</span>:</span><br><span class="line">            res = min(res,abs(<span class="number">2</span>*sums-total))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="comment"># 防止重复</span></span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> seen:</span><br><span class="line">                seen.add(i)</span><br><span class="line">                helper(k+<span class="number">1</span>,sums+stone_list[i])</span><br><span class="line">                seen.discard(i)</span><br><span class="line">    helper(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"> </span><br><span class="line">stone_list = [int(i) <span class="keyword">for</span> i <span class="keyword">in</span> input().split()]</span><br><span class="line">print(solution(stone_list))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分组背包</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span><span class="params">(stone_list)</span>:</span></span><br><span class="line">    n = len(stone_list)</span><br><span class="line">    total = sum(stone_list)</span><br><span class="line">    <span class="comment"># dp[i][v][k] 表示前i个物品中取v次时且重量为k时的总重量</span></span><br><span class="line">    dp = [[float(<span class="string">'-inf'</span>)]*(total//<span class="number">2</span>+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(n//<span class="number">2</span>+<span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(total//<span class="number">2</span>+<span class="number">1</span>):</span><br><span class="line">        dp[<span class="number">0</span>][k] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        <span class="keyword">for</span> v <span class="keyword">in</span> range(n//<span class="number">2</span>,<span class="number">0</span>,<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> range(total//<span class="number">2</span>,stone_list[i]<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">                dp[v][k] = max(dp[v][k],dp[v<span class="number">-1</span>][k-stone_list[i]]+stone_list[i])</span><br><span class="line">    <span class="keyword">return</span> abs(<span class="number">2</span>*dp[<span class="number">-1</span>][<span class="number">-1</span>]-total)</span><br><span class="line"></span><br><span class="line">stone_list = [int(i) <span class="keyword">for</span> i <span class="keyword">in</span> input().split()]</span><br><span class="line">print(solution(stone_list))</span><br></pre></td></tr></table></figure>

<h5 id="629-K个逆序对数组"><a href="#629-K个逆序对数组" class="headerlink" title="*629. K个逆序对数组"></a>*<span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvay1pbnZlcnNlLXBhaXJzLWFycmF5Lw==" title="https://leetcode-cn.com/problems/k-inverse-pairs-array/">629. K个逆序对数组<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kInversePairs</span><span class="params">(self, n: int, k: int)</span> -&gt; int:</span></span><br><span class="line">        dp = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(k+<span class="number">1</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n+<span class="number">1</span>):</span><br><span class="line">            dp[i][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        <span class="comment"># dp[i][j] 表示前i个数字组成j个逆序对时的数目</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,k+<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> j&lt;i:</span><br><span class="line">                    dp[i][j] = (dp[i][j<span class="number">-1</span>] + dp[i<span class="number">-1</span>][j])%(<span class="number">10</span>**<span class="number">9</span> + <span class="number">7</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[i][j] = (dp[i][j<span class="number">-1</span>] + dp[i<span class="number">-1</span>][j] - dp[i<span class="number">-1</span>][j-i])%(<span class="number">10</span>**<span class="number">9</span> + <span class="number">7</span>)</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>



<h3 id="树形dp"><a href="#树形dp" class="headerlink" title="树形dp"></a>树形dp</h3><p>dfs</p>
<h4 id="树的最值路径"><a href="#树的最值路径" class="headerlink" title="树的最值路径"></a>树的最值路径</h4><h5 id="124-二叉树中的最大路径和"><a href="#124-二叉树中的最大路径和" class="headerlink" title="124. 二叉树中的最大路径和"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvYmluYXJ5LXRyZWUtbWF4aW11bS1wYXRoLXN1bS8=" title="https://leetcode-cn.com/problems/binary-tree-maximum-path-sum/">124. 二叉树中的最大路径和<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxPathSum</span><span class="params">(self, root: TreeNode)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># res = float('-inf')</span></span><br><span class="line">        <span class="comment"># def helper(root):</span></span><br><span class="line">        <span class="comment">#     nonlocal res</span></span><br><span class="line">        <span class="comment">#     if not root:</span></span><br><span class="line">        <span class="comment">#         return 0</span></span><br><span class="line">        <span class="comment">#     left = max(helper(root.left),0)</span></span><br><span class="line">        <span class="comment">#     right = max(helper(root.right),0)</span></span><br><span class="line">        <span class="comment">#     res = max(res,left+root.val+right)</span></span><br><span class="line">        <span class="comment">#     return max(left,right) + root.val # 返回左右最大的一个长度</span></span><br><span class="line">        <span class="comment"># helper(root)</span></span><br><span class="line">        <span class="comment"># return res</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        res = float(<span class="string">'-inf'</span>)</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(root)</span>:</span></span><br><span class="line">            <span class="keyword">nonlocal</span> res</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            left = helper(root.left)</span><br><span class="line">            right = helper(root.right)</span><br><span class="line">            res = max(res,left+root.val+right)</span><br><span class="line">            <span class="keyword">return</span> max(<span class="number">0</span>,max(left,right)+root.val)</span><br><span class="line">        helper(root)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<h4 id="树的独立集"><a href="#树的独立集" class="headerlink" title="树的独立集"></a>树的独立集</h4><h5 id="337-打家劫舍-III"><a href="#337-打家劫舍-III" class="headerlink" title="337. 打家劫舍 III"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvaG91c2Utcm9iYmVyLWlpaS8=" title="https://leetcode-cn.com/problems/house-robber-iii/">337. 打家劫舍 III<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">rob</span><span class="params">(self, root: TreeNode)</span> -&gt; int:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(root)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>,<span class="number">0</span></span><br><span class="line">            left_butou,left_tou = dfs(root.left)</span><br><span class="line">            right_butou,right_tou = dfs(root.right)</span><br><span class="line">            <span class="keyword">return</span> max(left_butou+right_butou,left_butou+right_tou,left_tou+right_butou,left_tou+right_tou),left_butou+root.val+right_butou</span><br><span class="line">        <span class="keyword">return</span> max(dfs(root))</span><br></pre></td></tr></table></figure>

<h3 id="状态压缩dp"><a href="#状态压缩dp" class="headerlink" title="状态压缩dp"></a>状态压缩dp</h3><p>一般是dfs遍历所有情况+剪枝+记忆化，注意状态的对称性(一般这种问题跟排列和图相关)</p>
<p>原意是用二进制的不同位表示不同的状态，再依次做出决策</p>
<h5 id="526-优美的排列"><a href="#526-优美的排列" class="headerlink" title="526. 优美的排列"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvYmVhdXRpZnVsLWFycmFuZ2VtZW50Lw==" title="https://leetcode-cn.com/problems/beautiful-arrangement/">526. 优美的排列<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countArrangement</span><span class="params">(self, N: int)</span> -&gt; int:</span></span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        visited = [<span class="literal">False</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(N+<span class="number">1</span>)]</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(count)</span>:</span></span><br><span class="line">            <span class="keyword">nonlocal</span> res</span><br><span class="line">            <span class="keyword">if</span> count==N+<span class="number">1</span>:</span><br><span class="line">                res += <span class="number">1</span></span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,N+<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> visited[i]:</span><br><span class="line">                    visited[i] = <span class="literal">True</span></span><br><span class="line">                    <span class="keyword">if</span> i%count==<span class="number">0</span> <span class="keyword">or</span> count%i==<span class="number">0</span>:</span><br><span class="line">                        helper(count+<span class="number">1</span>)</span><br><span class="line">                    visited[i] = <span class="literal">False</span></span><br><span class="line">        helper(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<h5 id="464-我能赢吗"><a href="#464-我能赢吗" class="headerlink" title="464. 我能赢吗"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvY2FuLWktd2luLw==" title="https://leetcode-cn.com/problems/can-i-win/">464. 我能赢吗<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">canIWin</span><span class="params">(self, maxChoosableInteger: int, desiredTotal: int)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line">        <span class="comment"># 要求值&lt;=可选的最大值</span></span><br><span class="line">        <span class="keyword">if</span> desiredTotal&lt;=maxChoosableInteger:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="comment"># 所有值之和&lt;要求值</span></span><br><span class="line">        <span class="keyword">if</span> sum(range(<span class="number">1</span>,maxChoosableInteger+<span class="number">1</span>))&lt;desiredTotal:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"><span class="meta">        @lru_cache(None)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(used,desiredTotal)</span>:</span></span><br><span class="line">            <span class="comment"># 枚举状态</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(maxChoosableInteger):</span><br><span class="line">                cur = <span class="number">1</span>&lt;&lt;i</span><br><span class="line">                <span class="comment"># &amp;比较是否存在相同的bit位为1</span></span><br><span class="line">                <span class="keyword">if</span> used&amp;cur==<span class="number">0</span>:</span><br><span class="line">                    <span class="comment"># |更新used的bit位</span></span><br><span class="line">                    <span class="comment"># 如果自己选的时候满足要求或者另一个人选的时候为False，则自己为True</span></span><br><span class="line">                    <span class="keyword">if</span> desiredTotal&lt;=i+<span class="number">1</span> <span class="keyword">or</span> <span class="keyword">not</span> helper(used|cur,desiredTotal-i<span class="number">-1</span>):</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> helper(<span class="number">0</span>,desiredTotal)</span><br></pre></td></tr></table></figure>

<h5 id="935-骑士拨号器"><a href="#935-骑士拨号器" class="headerlink" title="935. 骑士拨号器"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMva25pZ2h0LWRpYWxlci8=" title="https://leetcode-cn.com/problems/knight-dialer/">935. 骑士拨号器<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">knightDialer</span><span class="params">(self, N: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># stat = &#123;0:[4,6],1:[6,8],2:[7,9],3:[4,8],4:[0,3,9],5:[],6:[0,1,7],7:[2,6],8:[1,3],9:[2,4]&#125;</span></span><br><span class="line">        <span class="comment"># from functools import lru_cache</span></span><br><span class="line">        <span class="comment"># @lru_cache(None)</span></span><br><span class="line">        <span class="comment"># def helper(i,N):</span></span><br><span class="line">        <span class="comment">#     res = 0</span></span><br><span class="line">        <span class="comment">#     if N==0:</span></span><br><span class="line">        <span class="comment">#         res += 1</span></span><br><span class="line">        <span class="comment">#         return res</span></span><br><span class="line">        <span class="comment">#     for j in stat[i]:</span></span><br><span class="line">        <span class="comment">#         res += helper(j,N-1)%(10**9+7)</span></span><br><span class="line">        <span class="comment">#     return res</span></span><br><span class="line">        <span class="comment"># # res = 0</span></span><br><span class="line">        <span class="comment"># # for i in stat.keys():</span></span><br><span class="line">        <span class="comment"># #     res += helper(i,N-1)%(10**9+7)</span></span><br><span class="line">        <span class="comment"># # return res%(10**9+7)</span></span><br><span class="line">        <span class="comment"># return (4*helper(1,N-1) + 2*helper(2,N-1) + 2*helper(6,N-1) + helper(0,N-1) + helper(5,N-1))%(10**9+7)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 画出状态图可知 或由上述的stat a,b,c,d分别为1,2,6,0</span></span><br><span class="line">        <span class="keyword">if</span> N==<span class="number">1</span>: <span class="keyword">return</span> <span class="number">10</span> <span class="comment">#多了一个5</span></span><br><span class="line">        a,b,c,d = <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">2</span>,N+<span class="number">1</span>):</span><br><span class="line">            a,b,c,d = b+c,<span class="number">2</span>*a,<span class="number">2</span>*a+d,<span class="number">2</span>*c</span><br><span class="line">        <span class="keyword">return</span> (<span class="number">4</span>*a+<span class="number">2</span>*b+<span class="number">2</span>*c+d)%(<span class="number">10</span>**<span class="number">9</span>+<span class="number">7</span>)</span><br></pre></td></tr></table></figure>

<h3 id="计数型dp"><a href="#计数型dp" class="headerlink" title="计数型dp"></a>计数型dp</h3><p>可以以组合数学的方法写出组合数，然后dp求组合数</p>
<h5 id="62-不同路径"><a href="#62-不同路径" class="headerlink" title="62. 不同路径"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvdW5pcXVlLXBhdGhzLw==" title="https://leetcode-cn.com/problems/unique-paths/">62. 不同路径<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">uniquePaths</span><span class="params">(self, m: int, n: int)</span> -&gt; int:</span></span><br><span class="line">        dp = [[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> range(m)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            dp[i][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(n):</span><br><span class="line">            dp[<span class="number">0</span>][j] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,n):</span><br><span class="line">                dp[i][j] = dp[i<span class="number">-1</span>][j] + dp[i][j<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h5 id="63-不同路径-II"><a href="#63-不同路径-II" class="headerlink" title="63. 不同路径 II"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvdW5pcXVlLXBhdGhzLWlpLw==" title="https://leetcode-cn.com/problems/unique-paths-ii/">63. 不同路径 II<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">uniquePathsWithObstacles</span><span class="params">(self, obstacleGrid: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        m,n = len(obstacleGrid),len(obstacleGrid[<span class="number">0</span>])</span><br><span class="line">        dp = [[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> range(m)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            <span class="keyword">if</span> obstacleGrid[i][<span class="number">0</span>]==<span class="number">1</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            dp[i][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> obstacleGrid[<span class="number">0</span>][j]==<span class="number">1</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            dp[<span class="number">0</span>][j] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,n):</span><br><span class="line">                <span class="keyword">if</span> obstacleGrid[i][j]==<span class="number">0</span>:</span><br><span class="line">                    dp[i][j] = dp[i<span class="number">-1</span>][j] + dp[i][j<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h4 id="卡特兰数"><a href="#卡特兰数" class="headerlink" title="卡特兰数"></a>卡特兰数</h4><p><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvdW5pcXVlLWJpbmFyeS1zZWFyY2gtdHJlZXMvc29sdXRpb24vYnUtdG9uZy1kZS1lci1jaGEtc291LXN1by1zaHUtYnktbGVldGNvZGUv" title="https://leetcode-cn.com/problems/unique-binary-search-trees/solution/bu-tong-de-er-cha-sou-suo-shu-by-leetcode/">https://leetcode-cn.com/problems/unique-binary-search-trees/solution/bu-tong-de-er-cha-sou-suo-shu-by-leetcode/<i class="fa fa-external-link"></i></span></p>
<h5 id="96-不同的二叉搜索树"><a href="#96-不同的二叉搜索树" class="headerlink" title="96. 不同的二叉搜索树"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvdW5pcXVlLWJpbmFyeS1zZWFyY2gtdHJlZXMv" title="https://leetcode-cn.com/problems/unique-binary-search-trees/">96. 不同的二叉搜索树<i class="fa fa-external-link"></i></span></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">G(n) = \sum_&#123;i=1&#125;^nF(i,n)  F(i,n) = G(i-1)*G(n-i) ==&gt; G(n) = \sum_&#123;i=1&#125;^n(G(i-1)*G(n-i))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numTrees</span><span class="params">(self, n: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># # 动规</span></span><br><span class="line">        <span class="comment"># dp = [0 for _ in range(n+1)]</span></span><br><span class="line">        <span class="comment"># dp[0] = 1</span></span><br><span class="line">        <span class="comment"># dp[1] = 1</span></span><br><span class="line">        <span class="comment"># for j in range(2,n+1):</span></span><br><span class="line">        <span class="comment">#     for i in range(1,j+1):</span></span><br><span class="line">        <span class="comment">#         dp[j] += dp[i-1]*dp[j-i]</span></span><br><span class="line">        <span class="comment"># return dp[-1]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line"><span class="meta">        @lru_cache(None)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(j)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> j==<span class="number">0</span> <span class="keyword">or</span> j==<span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">            ans = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,j+<span class="number">1</span>):</span><br><span class="line">                ans += helper(i<span class="number">-1</span>)*helper(j-i)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">        <span class="keyword">return</span> helper(n)</span><br></pre></td></tr></table></figure>

<h5 id="22-括号生成"><a href="#22-括号生成" class="headerlink" title="22. 括号生成"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvZ2VuZXJhdGUtcGFyZW50aGVzZXMv" title="https://leetcode-cn.com/problems/generate-parentheses/">22. 括号生成<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">generateParenthesis</span><span class="params">(self, n: int)</span> -&gt; List[str]:</span></span><br><span class="line">        <span class="comment"># res = []</span></span><br><span class="line">        <span class="comment"># # 可理解为n个1,-1,前i个数中1的个数&gt;=-1的个数</span></span><br><span class="line">        <span class="comment"># def helper(nump,numn,temp):</span></span><br><span class="line">        <span class="comment">#     if nump==0:</span></span><br><span class="line">        <span class="comment">#         res.append(temp+')'*numn)</span></span><br><span class="line">        <span class="comment">#         return</span></span><br><span class="line">        <span class="comment">#     if nump&gt;numn:</span></span><br><span class="line">        <span class="comment">#         return</span></span><br><span class="line">        <span class="comment">#     helper(nump-1,numn,temp+'(')</span></span><br><span class="line">        <span class="comment">#     helper(nump,numn-1,temp+')')</span></span><br><span class="line">        <span class="comment"># helper(n,n,"")</span></span><br><span class="line">        <span class="comment"># return res</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># dp[i] = "(" + dp[j] + ")" + dp[i-1-j]  j=0,1,...i-1; i=1,2,...,n</span></span><br><span class="line">        <span class="comment"># 即由前一个排列,按照从左到右加入括号</span></span><br><span class="line">        dp = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">        dp[<span class="number">0</span>] = [<span class="string">""</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">            temp = []</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i):</span><br><span class="line">                <span class="comment"># 由dp[j]中的各种排列和dp[i-1-j]的各种排列相互组合</span></span><br><span class="line">                <span class="keyword">for</span> l <span class="keyword">in</span> dp[j]:</span><br><span class="line">                    <span class="keyword">for</span> r <span class="keyword">in</span> dp[i<span class="number">-1</span>-j]:</span><br><span class="line">                        temp.append(<span class="string">"("</span>+l+<span class="string">")"</span>+r)</span><br><span class="line">            dp[i] = temp</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h5 id="32-最长有效括号"><a href="#32-最长有效括号" class="headerlink" title="32. 最长有效括号"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvbG9uZ2VzdC12YWxpZC1wYXJlbnRoZXNlcy8=" title="https://leetcode-cn.com/problems/longest-valid-parentheses/">32. 最长有效括号<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestValidParentheses</span><span class="params">(self, s: str)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># # 栈 O(nlogn)</span></span><br><span class="line">        <span class="comment"># stack = []</span></span><br><span class="line">        <span class="comment"># res = []</span></span><br><span class="line">        <span class="comment"># for i in range(len(s)):</span></span><br><span class="line">        <span class="comment">#     if s[i]=='(':</span></span><br><span class="line">        <span class="comment">#         stack.append(i)</span></span><br><span class="line">        <span class="comment">#     else:</span></span><br><span class="line">        <span class="comment">#         if stack:</span></span><br><span class="line">        <span class="comment">#             res.extend([stack.pop(),i])</span></span><br><span class="line">        <span class="comment"># res.sort()</span></span><br><span class="line">        <span class="comment"># ans = 0</span></span><br><span class="line">        <span class="comment"># i = 0</span></span><br><span class="line">        <span class="comment"># while i&lt;len(res):</span></span><br><span class="line">        <span class="comment">#     j = i+1</span></span><br><span class="line">        <span class="comment">#     while j&lt;len(res) and res[j-1]+1==res[j]:</span></span><br><span class="line">        <span class="comment">#         j += 1</span></span><br><span class="line">        <span class="comment">#     ans = max(ans,j-i)</span></span><br><span class="line">        <span class="comment">#     i = j</span></span><br><span class="line">        <span class="comment"># return ans</span></span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">        <span class="comment"># # 栈 O(n)</span></span><br><span class="line">        <span class="comment"># stack = [-1]</span></span><br><span class="line">        <span class="comment"># res = 0</span></span><br><span class="line">        <span class="comment"># for i in range(len(s)):</span></span><br><span class="line">        <span class="comment">#     if s[i]=='(':</span></span><br><span class="line">        <span class="comment">#         stack.append(i)</span></span><br><span class="line">        <span class="comment">#     else:</span></span><br><span class="line">        <span class="comment">#         stack.pop()</span></span><br><span class="line">        <span class="comment">#         if not stack:</span></span><br><span class="line">        <span class="comment">#             stack.append(i)</span></span><br><span class="line">        <span class="comment">#         res = max(res,i-stack[-1])</span></span><br><span class="line">        <span class="comment"># return res</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 动规</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> s: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        dp = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> i&gt;<span class="number">0</span> <span class="keyword">and</span> s[i]==<span class="string">')'</span>:</span><br><span class="line">                <span class="keyword">if</span> s[i<span class="number">-1</span>]==<span class="string">'('</span>:</span><br><span class="line">                    dp[i] = dp[i<span class="number">-2</span>] + <span class="number">2</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="comment"># 即与i-1右括号匹配的左括号的前一位置为i-1-dp[i-1]</span></span><br><span class="line">                    <span class="keyword">if</span> i<span class="number">-1</span>-dp[i<span class="number">-1</span>]&gt;=<span class="number">0</span> <span class="keyword">and</span> s[i<span class="number">-1</span>-dp[i<span class="number">-1</span>]]==<span class="string">'('</span>:</span><br><span class="line">                        <span class="comment"># 即 ...((....)) 则把dp[i-1]的长度(即i-dp[i-1]到i-1) + dp[i-dp[i-1]-2]的长度(即i-1-dp[i-1]前面可能的长度) + 一对括号(即i-1-dp[i-1]与当前i)</span></span><br><span class="line">                        dp[i] = dp[i<span class="number">-1</span>] + dp[i-dp[i<span class="number">-1</span>]<span class="number">-2</span>] + <span class="number">2</span></span><br><span class="line">        <span class="keyword">return</span> max(dp)</span><br></pre></td></tr></table></figure>



<h3 id="递推型dp"><a href="#递推型dp" class="headerlink" title="递推型dp"></a>递推型dp</h3><p>所有线性递推关系都可以用矩阵快速幂做，可以O(logN)，最典型是斐波那契数列</p>
<h4 id="斐波那契数列"><a href="#斐波那契数列" class="headerlink" title="斐波那契数列"></a>斐波那契数列</h4><p>由$f(n)=f(n-1)+f(n-2),f(0)=1,f(1)=1,f(2)=2$推出$F_n=1/\sqrt{5}[(\frac{1+\sqrt{5}}{2})^n−(\frac{1-\sqrt{5}}{2})^n]$</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvcHJpc29uLWNlbGxzLWFmdGVyLW4tZGF5cy8=" title="https://leetcode-cn.com/problems/prison-cells-after-n-days/">957. N 天后的牢房<i class="fa fa-external-link"></i></span></p>
<h3 id="概率型dp"><a href="#概率型dp" class="headerlink" title="概率型dp"></a>概率型dp</h3><h5 id="808-分汤"><a href="#808-分汤" class="headerlink" title="808. 分汤"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvc291cC1zZXJ2aW5ncy8=" title="https://leetcode-cn.com/problems/soup-servings/">808. 分汤<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">soupServings</span><span class="params">(self, N: int)</span> -&gt; float:</span></span><br><span class="line">        <span class="comment"># ##############</span></span><br><span class="line">        <span class="keyword">if</span> N&gt;=<span class="number">500</span>*<span class="number">25</span>: <span class="keyword">return</span> <span class="number">1.</span></span><br><span class="line">        hash_ = &#123;(<span class="number">100</span>,<span class="number">0</span>),(<span class="number">75</span>,<span class="number">25</span>),(<span class="number">50</span>,<span class="number">50</span>),(<span class="number">25</span>,<span class="number">75</span>)&#125;</span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line"><span class="meta">        @lru_cache(None)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(na,nb)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> na&lt;=<span class="number">0</span> <span class="keyword">and</span> nb&lt;=<span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.5</span></span><br><span class="line">            <span class="keyword">if</span> na&lt;=<span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1.</span></span><br><span class="line">            <span class="keyword">if</span> nb&lt;=<span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.</span></span><br><span class="line">            ans = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> i,j <span class="keyword">in</span> hash_:</span><br><span class="line">                ans += helper(na-i,nb-j)</span><br><span class="line">            <span class="keyword">return</span> ans*<span class="number">0.25</span></span><br><span class="line">        <span class="keyword">return</span> helper(N,N)</span><br></pre></td></tr></table></figure>

<h5 id="837-新21点"><a href="#837-新21点" class="headerlink" title="837. 新21点"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvbmV3LTIxLWdhbWUv" title="https://leetcode-cn.com/problems/new-21-game/">837. 新21点<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">new21Game</span><span class="params">(self, N: int, K: int, W: int)</span> -&gt; float:</span></span><br><span class="line">        <span class="keyword">if</span> K==<span class="number">0</span>: <span class="keyword">return</span> <span class="number">1.</span></span><br><span class="line">        dp = [<span class="number">0.</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(K+W)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(K,min(N,K+W<span class="number">-1</span>)+<span class="number">1</span>):</span><br><span class="line">            dp[i] = <span class="number">1.</span></span><br><span class="line">        dp[K<span class="number">-1</span>] = (min(N,K+W<span class="number">-1</span>)-K+<span class="number">1</span>)/W</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(K<span class="number">-2</span>,<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">            dp[i] = dp[i+<span class="number">1</span>] + (dp[i+<span class="number">1</span>]-dp[i+W+<span class="number">1</span>])/W</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<h3 id="博弈型dp"><a href="#博弈型dp" class="headerlink" title="博弈型dp"></a>博弈型dp</h3><p>dfs+记忆化有时更简单</p>
<h5 id="292-Nim-游戏"><a href="#292-Nim-游戏" class="headerlink" title="292. Nim 游戏"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvbmltLWdhbWUv" title="https://leetcode-cn.com/problems/nim-game/">292. Nim 游戏<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">canWinNim</span><span class="params">(self, n: int)</span> -&gt; bool:</span></span><br><span class="line">        <span class="comment"># if n&lt;=3:</span></span><br><span class="line">        <span class="comment">#     return True</span></span><br><span class="line">        <span class="comment"># dp = [False for _ in range(n)]</span></span><br><span class="line">        <span class="comment"># dp[0] = dp[1] = dp[2] = True</span></span><br><span class="line">        <span class="comment"># for i in range(3,n):</span></span><br><span class="line">        <span class="comment">#     dp[i] = True if not dp[i-1] or not dp[i-2] or not dp[i-3] else False</span></span><br><span class="line">        <span class="comment"># return dp[-1]</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> n%<span class="number">4</span>!=<span class="number">0</span></span><br></pre></td></tr></table></figure>

<h5 id="877-石子游戏"><a href="#877-石子游戏" class="headerlink" title="877. 石子游戏"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvc3RvbmUtZ2FtZS8=" title="https://leetcode-cn.com/problems/stone-game/">877. 石子游戏<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">stoneGame</span><span class="params">(self, piles: List[int])</span> -&gt; bool:</span></span><br><span class="line">        <span class="comment"># n = len(piles)</span></span><br><span class="line">        <span class="comment"># dp = [[[0,0] for _ in range(n)] for _ in range(n)]</span></span><br><span class="line">        <span class="comment"># for i in range(n):</span></span><br><span class="line">        <span class="comment">#     dp[i][i][0] = piles[i]</span></span><br><span class="line">        <span class="comment"># for i in range(n-1,-1,-1):</span></span><br><span class="line">        <span class="comment">#     for j in range(i+1,n):</span></span><br><span class="line">        <span class="comment">#         # 先手选择左边或右边，然后成为后手</span></span><br><span class="line">        <span class="comment">#         left,right = piles[i]+dp[i+1][j][1],piles[j]+dp[i][j-1][1]</span></span><br><span class="line">        <span class="comment">#         dp[i][j][0] = max(left,right)</span></span><br><span class="line">        <span class="comment">#         # 先手选择了左边，则后手成了左边之外的先手</span></span><br><span class="line">        <span class="comment">#         if dp[i][j][0]==left:</span></span><br><span class="line">        <span class="comment">#             dp[i][j][1] = dp[i+1][j][0]</span></span><br><span class="line">        <span class="comment">#         # 先手选择了右边，则后手成了右边之外的先手</span></span><br><span class="line">        <span class="comment">#         elif dp[i][j][0]==right:</span></span><br><span class="line">        <span class="comment">#             dp[i][j][1] = dp[i][j-1][0]</span></span><br><span class="line">        <span class="comment"># return dp[0][n-1][0]&gt;dp[0][n-1][1]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># return True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        n = len(piles)</span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line"><span class="meta">        @lru_cache(None)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dp</span><span class="params">(i,j)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> i&gt;j: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> i==j: <span class="keyword">return</span> piles[i]</span><br><span class="line">            <span class="comment"># 先手选左边，后手会使先手再次选的时候最小</span></span><br><span class="line">            left = piles[i] + min(dp(i+<span class="number">2</span>,j),dp(i+<span class="number">1</span>,j<span class="number">-1</span>))</span><br><span class="line">            <span class="comment"># 先手选右边，后手会使先手再次选的时候最小</span></span><br><span class="line">            right = piles[j] + min(dp(i,j<span class="number">-2</span>),dp(i+<span class="number">1</span>,j<span class="number">-1</span>))</span><br><span class="line">            <span class="keyword">return</span> max(left,right)</span><br><span class="line">        res = dp(<span class="number">0</span>,n<span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> res&gt;sum(piles)-res</span><br></pre></td></tr></table></figure>

<h5 id="1140-石子游戏-II"><a href="#1140-石子游戏-II" class="headerlink" title="1140. 石子游戏 II"></a><span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvc3RvbmUtZ2FtZS1paS8=" title="https://leetcode-cn.com/problems/stone-game-ii/">1140. 石子游戏 II<i class="fa fa-external-link"></i></span></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">stoneGameII</span><span class="params">(self, piles: List[int])</span> -&gt; int:</span></span><br><span class="line">        n = len(piles)</span><br><span class="line">        sums = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">        sums[<span class="number">1</span>] = piles[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n):</span><br><span class="line">            sums[i+<span class="number">1</span>] = sums[i] + piles[i]</span><br><span class="line">        <span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line"><span class="meta">        @lru_cache(None)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dp</span><span class="params">(i,M)</span>:</span></span><br><span class="line">            <span class="comment"># 超过n时</span></span><br><span class="line">            <span class="keyword">if</span> i&gt;n: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            <span class="comment"># 剩下元素小于2*M时，直接取完</span></span><br><span class="line">            <span class="keyword">if</span> i+<span class="number">2</span>*M&gt;n: <span class="keyword">return</span> sums[n]-sums[i]</span><br><span class="line">            cur = <span class="number">0</span></span><br><span class="line">            <span class="comment"># 否则取x使得元素能够最大(后续的总值-后手能取的最大值)</span></span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">2</span>*M+<span class="number">1</span>):</span><br><span class="line">                cur = max(cur,sums[n]-sums[i]-dp(i+x,max(M,x)))</span><br><span class="line">            <span class="keyword">return</span> cur</span><br><span class="line">        <span class="keyword">return</span> dp(<span class="number">0</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\09\08\求职-编程-其它\" rel="bookmark">编程-其它</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\09\08\求职-编程-字典树\" rel="bookmark">字典树</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\09\08\求职-编程-滑动窗口\" rel="bookmark">滑动窗口</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\09\08\求职-编程-单调栈\" rel="bookmark">单调栈</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\09\08\求职-编程-图\" rel="bookmark">图</a></div>
    </li>
  </ul>
<div class="post-widgets">
      <div id="needsharebutton-postbottom">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    </div>
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>lumosity
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://lumosity4tpj.github.io/2020/09/08/%E6%B1%82%E8%81%8C-%E7%BC%96%E7%A8%8B-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" title="动态规划">https://lumosity4tpj.github.io/2020/09/08/%E6%B1%82%E8%81%8C-%E7%BC%96%E7%A8%8B-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC96aC1DTg=="><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/%E6%B1%82%E8%81%8C/" rel="tag"><i class="fa fa-tag"></i> 求职</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2020/09/08/%E6%B1%82%E8%81%8C-%E7%BC%96%E7%A8%8B-%E6%8E%92%E5%BA%8F/" rel="next" title="排序">
                  <i class="fa fa-chevron-left"></i> 排序
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/2020/09/08/%E6%B1%82%E8%81%8C-%E7%BC%96%E7%A8%8B-%E6%A0%91/" rel="prev" title="树">
                  树 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="gitalk-container"></div>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#动态规划"><span class="nav-number">1.</span> <span class="nav-text">动态规划</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#线性dp"><span class="nav-number">1.0.1.</span> <span class="nav-text">线性dp</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#序列问题"><span class="nav-number">1.0.1.1.</span> <span class="nav-text">序列问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#300-最长上升子序列"><span class="nav-number">1.0.1.1.1.</span> <span class="nav-text">*300. 最长上升子序列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1143-最长公共子序列"><span class="nav-number">1.0.1.1.2.</span> <span class="nav-text">1143. 最长公共子序列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#最长公共上升子序列"><span class="nav-number">1.0.1.1.3.</span> <span class="nav-text">最长公共上升子序列</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编辑距离问题"><span class="nav-number">1.0.1.2.</span> <span class="nav-text">编辑距离问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#72-编辑距离"><span class="nav-number">1.0.1.2.1.</span> <span class="nav-text">72. 编辑距离</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#面试题-01-05-一次编辑"><span class="nav-number">1.0.1.2.2.</span> <span class="nav-text">面试题 01.05. 一次编辑</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#最大和问题"><span class="nav-number">1.0.1.3.</span> <span class="nav-text">最大和问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#53-最大子序和"><span class="nav-number">1.0.1.3.1.</span> <span class="nav-text">53. 最大子序和</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#120-三角形最小路径和"><span class="nav-number">1.0.1.3.2.</span> <span class="nav-text">120. 三角形最小路径和</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#区间dp"><span class="nav-number">1.0.2.</span> <span class="nav-text">区间dp</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#516-最长回文子序列"><span class="nav-number">1.0.2.0.1.</span> <span class="nav-text">516. 最长回文子序列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-最长回文子串"><span class="nav-number">1.0.2.0.2.</span> <span class="nav-text">**5. 最长回文子串</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#647-回文子串"><span class="nav-number">1.0.2.0.3.</span> <span class="nav-text">647. 回文子串</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1039-多边形三角剖分的最低得分"><span class="nav-number">1.0.2.0.4.</span> <span class="nav-text">1039. 多边形三角剖分的最低得分</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#312-戳气球"><span class="nav-number">1.0.2.0.5.</span> <span class="nav-text">312. 戳气球</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#背包问题"><span class="nav-number">1.0.3.</span> <span class="nav-text">背包问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#0-1背包"><span class="nav-number">1.0.3.1.</span> <span class="nav-text">0-1背包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#完全背包"><span class="nav-number">1.0.3.2.</span> <span class="nav-text">完全背包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多重背包"><span class="nav-number">1.0.3.3.</span> <span class="nav-text">多重背包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#混合背包"><span class="nav-number">1.0.3.4.</span> <span class="nav-text">混合背包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二维费用背包"><span class="nav-number">1.0.3.5.</span> <span class="nav-text">二维费用背包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组背包"><span class="nav-number">1.0.3.6.</span> <span class="nav-text">分组背包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#有依赖的背包-hard"><span class="nav-number">1.0.3.7.</span> <span class="nav-text">有依赖的背包(hard)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#背包的方案数"><span class="nav-number">1.0.3.8.</span> <span class="nav-text">背包的方案数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#背包的方案"><span class="nav-number">1.0.3.9.</span> <span class="nav-text">背包的方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#练习题"><span class="nav-number">1.0.3.10.</span> <span class="nav-text">练习题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#416-分割等和子集"><span class="nav-number">1.0.3.10.1.</span> <span class="nav-text">416. 分割等和子集</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#494-目标和"><span class="nav-number">1.0.3.10.2.</span> <span class="nav-text">494. 目标和</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#322-零钱兑换"><span class="nav-number">1.0.3.10.3.</span> <span class="nav-text">322. 零钱兑换</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#518-零钱兑换-II"><span class="nav-number">1.0.3.10.4.</span> <span class="nav-text">518. 零钱兑换 II</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#474-一和零"><span class="nav-number">1.0.3.10.5.</span> <span class="nav-text">474. 一和零</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#编程题-运矿石"><span class="nav-number">1.0.3.10.6.</span> <span class="nav-text">[编程题]运矿石</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#629-K个逆序对数组"><span class="nav-number">1.0.3.10.7.</span> <span class="nav-text">*629. K个逆序对数组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#树形dp"><span class="nav-number">1.0.4.</span> <span class="nav-text">树形dp</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#树的最值路径"><span class="nav-number">1.0.4.1.</span> <span class="nav-text">树的最值路径</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#124-二叉树中的最大路径和"><span class="nav-number">1.0.4.1.1.</span> <span class="nav-text">124. 二叉树中的最大路径和</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#树的独立集"><span class="nav-number">1.0.4.2.</span> <span class="nav-text">树的独立集</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#337-打家劫舍-III"><span class="nav-number">1.0.4.2.1.</span> <span class="nav-text">337. 打家劫舍 III</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#状态压缩dp"><span class="nav-number">1.0.5.</span> <span class="nav-text">状态压缩dp</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#526-优美的排列"><span class="nav-number">1.0.5.0.1.</span> <span class="nav-text">526. 优美的排列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#464-我能赢吗"><span class="nav-number">1.0.5.0.2.</span> <span class="nav-text">464. 我能赢吗</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#935-骑士拨号器"><span class="nav-number">1.0.5.0.3.</span> <span class="nav-text">935. 骑士拨号器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#计数型dp"><span class="nav-number">1.0.6.</span> <span class="nav-text">计数型dp</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#62-不同路径"><span class="nav-number">1.0.6.0.1.</span> <span class="nav-text">62. 不同路径</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#63-不同路径-II"><span class="nav-number">1.0.6.0.2.</span> <span class="nav-text">63. 不同路径 II</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#卡特兰数"><span class="nav-number">1.0.6.1.</span> <span class="nav-text">卡特兰数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#96-不同的二叉搜索树"><span class="nav-number">1.0.6.1.1.</span> <span class="nav-text">96. 不同的二叉搜索树</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#22-括号生成"><span class="nav-number">1.0.6.1.2.</span> <span class="nav-text">22. 括号生成</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#32-最长有效括号"><span class="nav-number">1.0.6.1.3.</span> <span class="nav-text">32. 最长有效括号</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#递推型dp"><span class="nav-number">1.0.7.</span> <span class="nav-text">递推型dp</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#斐波那契数列"><span class="nav-number">1.0.7.1.</span> <span class="nav-text">斐波那契数列</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#概率型dp"><span class="nav-number">1.0.8.</span> <span class="nav-text">概率型dp</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#808-分汤"><span class="nav-number">1.0.8.0.1.</span> <span class="nav-text">808. 分汤</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#837-新21点"><span class="nav-number">1.0.8.0.2.</span> <span class="nav-text">837. 新21点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#博弈型dp"><span class="nav-number">1.0.9.</span> <span class="nav-text">博弈型dp</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#292-Nim-游戏"><span class="nav-number">1.0.9.0.1.</span> <span class="nav-text">292. Nim 游戏</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#877-石子游戏"><span class="nav-number">1.0.9.0.2.</span> <span class="nav-text">877. 石子游戏</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1140-石子游戏-II"><span class="nav-number">1.0.9.0.3.</span> <span class="nav-text">1140. 石子游戏 II</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lumosity"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">lumosity</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2x1bW9zaXR5NHRwag==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lumosity4tpj"><i class="fa fa-fw fa-github"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOnRhbmdwZWlqdW40QG91dGxvb2suY29t" title="E-Mail → mailto:tangpeijun4@outlook.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</span>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-moon-o"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lumosity</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">134k</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script src="/js/local-search.js"></script>








<script>
if (document.querySelectorAll('div.pdf').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/pdfobject@2/pdfobject.min.js', () => {
    document.querySelectorAll('div.pdf').forEach(element => {
      PDFObject.embed(element.getAttribute('target'), element, {
        pdfOpenParams: {
          navpanes: 0,
          toolbar: 0,
          statusbar: 0,
          pagemode: 'thumbs',
          view: 'FitH'
        },
        PDFJS_URL: '/lib/pdf/web/viewer.html',
        height: element.getAttribute('height') || '500px'
      });
    });
  }, window.PDFObject);
}
</script>


<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme: 'forest',
      logLevel: 3,
      flowchart: { curve: 'linear' },
      gantt: { axisFormat: '%m/%d/%Y' },
      sequence: { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>



  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout: 3000,
        priority: true,
        ignores: [uri => uri.includes('#'),uri => uri == 'https://lumosity4tpj.github.io/2020/09/08/%E6%B1%82%E8%81%8C-%E7%BC%96%E7%A8%8B-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/',]
      });
      });
  </script>
<!-- calendar widget -->

    <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-calendar/calendar.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-calendar/languages.min.js"></script>
    <script>
    $(function() {
        $('#CloudCalendar').aCalendar('zh-CN',
            $.extend(
                '', {
                    single:true,
                    root:'/calendar/'
                }
            )
        );
    });
    </script>


  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script>
  <script>
      pbOptions = {};
        pbOptions.iconStyle = "box";
        pbOptions.boxForm = "horizontal";
        pbOptions.position = "bottomCenter";
        pbOptions.networks = "Wechat,Weibo,QQZone,Douban,Twitter,Facebook,Mailto";
      new needShareButton('#needsharebutton-postbottom', pbOptions);
  </script>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '8b56991ada74c93b8aea',
      clientSecret: '34cd47cbe96ac746de8d674ca01955d67b744152',
      repo: 'lumosity4tpj.github.io',
      owner: 'lumosity4tpj',
      admin: ['lumosity4tpj'],
      id: '0f5026490973e9f25411aead3020faf1',
        language: '',
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

</body>
</html>
